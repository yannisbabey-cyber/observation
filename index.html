<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <title>#jeminforme#jedécode#jegardelespritcritique — Méthodes d’enquête</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <style>
    :root{
      --bg:#f3f4f6;
      --ink:#0f172a;
      --muted:#475569;
      --card:#ffffff;
      --line:#e5e7eb;
      --shadow: 0 8px 24px rgba(15,23,42,.08);
      --shadow2: 0 12px 36px rgba(15,23,42,.12);
      --radius: 18px;

      /* Pastels par catégories */
      --cat-obs:#cfe8ff;       /* bleu */
      --cat-inter:#ffd9e6;     /* rose */
      --cat-imm:#d7f7e8;       /* vert */
      --cat-parc:#fff3c4;      /* jaune */
      --cat-exp:#ffd9c2;       /* orange */
      --cat-suivi:#e6ddff;     /* violet */
      --cat-inv:#dff4ff;       /* bleu clair */
      --cat-lang:#e9ffe0;      /* vert clair */
      --cat-meta:#eaeaea;      /* gris */

      --accent:#111827;

      /* Alert */
      --warn-bg:#fff7ed;
      --warn-line:#fed7aa;
      --warn-ink:#9a3412;
    }

    *{ box-sizing:border-box; }
    body{
      margin:0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      color:var(--ink);
      background:var(--bg);
    }

    header{
      background: linear-gradient(180deg, #111827, #0b1220);
      color:white;
      padding: 1.1rem 1rem 1rem;
      position: sticky;
      top:0;
      z-index: 50;
      box-shadow: 0 6px 20px rgba(0,0,0,.18);
    }
    .wrap{ max-width: 1200px; margin:0 auto; }

    .topbar{
      display:flex;
      gap:.8rem;
      align-items:flex-start;
      flex-wrap:wrap;
      justify-content:space-between;
    }

    /* ✅ plus de "Exercices 1–19" en haut */
    h1{
      font-size: 1.05rem;
      margin:0;
      font-weight: 900;
      letter-spacing: .2px;
    }
    .subtitle{
      font-size: .85rem;
      color: rgba(255,255,255,.78);
      margin-top:.25rem;
      max-width: 60ch;
    }

    .searchRow{
      display:flex;
      gap:.5rem;
      align-items:center;
      flex: 1 1 520px;
      justify-content:flex-end;
    }
    .searchRow input{
      width: min(640px, 100%);
      padding: .75rem .9rem;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,.16);
      outline:none;
      color: white;
      background: rgba(255,255,255,.08);
      backdrop-filter: blur(6px);
    }
    .searchRow input::placeholder{ color: rgba(255,255,255,.65); }

    .pill{
      border: 1px solid rgba(255,255,255,.16);
      background: rgba(255,255,255,.08);
      color: rgba(255,255,255,.9);
      padding: .55rem .8rem;
      border-radius: 999px;
      cursor: pointer;
      font-size: .85rem;
      user-select:none;
      display:inline-flex;
      gap:.45rem;
      align-items:center;
    }
    .pill:active{ transform: translateY(1px); }

    /* Menu catégories sous la recherche */
    .cats{
      display:flex;
      flex-wrap:wrap;
      gap:.5rem;
      margin-top:.8rem;
    }
    .catBtn{
      border: 1px solid rgba(255,255,255,.16);
      background: rgba(255,255,255,.08);
      color: rgba(255,255,255,.9);
      padding: .45rem .7rem;
      border-radius: 999px;
      cursor:pointer;
      font-size:.82rem;
      display:inline-flex;
      align-items:center;
      gap:.45rem;
      transition: transform .05s ease;
      user-select:none;
    }
    .catDot{
      width: 10px;
      height: 10px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,.35);
      display:inline-block;
    }
    .catBtn.active{
      background: rgba(255,255,255,.18);
      border-color: rgba(255,255,255,.28);
    }

    main{
      max-width: 1200px;
      margin: 0 auto;
      padding: 1rem;
    }

    .grid{
      display:grid;
      grid-template-columns: repeat(3, minmax(0, 1fr));
      gap: 1rem;
      margin-top: .75rem;
    }

    @media (max-width: 980px){
      .grid{ grid-template-columns: repeat(2, minmax(0, 1fr)); }
      .searchRow{ justify-content:flex-start; }
    }
    @media (max-width: 620px){
      .grid{ grid-template-columns: 1fr; }
      .searchRow input{ padding:.7rem .85rem; }
      h1{ font-size: 1rem; }
      .subtitle{ display:none; }
    }

    .card{
      background: var(--card);
      border: 1px solid var(--line);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      overflow:hidden;
      display:flex;
      flex-direction:column;
      min-height: 310px;
      position:relative;
    }
    .cardHeader{
      padding: .85rem .95rem .6rem;
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap:.8rem;
    }
    .titleBlock{ min-width:0; }
    .exNo{
      font-size:.78rem;
      color: var(--muted);
      font-weight:900;
      letter-spacing:.2px;
    }
    .exTitle{
      margin:.15rem 0 0;
      font-size: 1.08rem;
      line-height:1.2;
      font-weight:900;
    }

    .badge{
      padding: .35rem .6rem;
      border-radius: 999px;
      font-size:.78rem;
      font-weight:900;
      color:#111827;
      border:1px solid rgba(15,23,42,.08);
      white-space:nowrap;
    }

    .iconWrap{
      width:100%;
      background: #fafafa;
      border-top:1px dashed rgba(15,23,42,.08);
      border-bottom:1px solid var(--line);
      display:flex;
      align-items:center;
      justify-content:center;
      padding: 1rem;
    }
    .iconWrap svg{
      width: 120px;
      height: 90px;
      stroke:#111827;
      fill:none;
      stroke-width:2.2;
      stroke-linecap:round;
      stroke-linejoin:round;
      opacity:.92;
    }

    .cardBody{
      padding: .85rem .95rem 1rem;
      display:flex;
      flex-direction:column;
      gap:.65rem;
      flex:1;
    }

    .miniDesc{
      color: var(--muted);
      font-size:.92rem;
      line-height:1.38;
      margin:0;
    }

    .goalLine{
      font-size:.9rem;
      font-weight:900;
      color:#0f172a;
      background:#f8fafc;
      border:1px solid var(--line);
      border-radius: 14px;
      padding:.55rem .7rem;
    }
    .goalLine span{
      color: var(--muted);
      font-weight:800;
    }

    details{
      border: 1px solid var(--line);
      border-radius: 14px;
      background:#fcfcfd;
      padding: .55rem .7rem;
    }
    summary{
      cursor:pointer;
      font-weight:900;
      font-size:.9rem;
      list-style:none;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:.6rem;
    }
    summary::-webkit-details-marker{ display:none; }
    .chev{
      width: 10px; height:10px;
      border-right: 2px solid #111827;
      border-bottom: 2px solid #111827;
      transform: rotate(45deg);
      opacity:.7;
      margin-left:auto;
      transition: transform .12s ease;
    }
    details[open] .chev{ transform: rotate(225deg); }
    .detailText{
      margin:.55rem 0 0;
      color: var(--ink);
      font-size:.92rem;
      line-height:1.38;
    }
    .detailText b{ font-weight:900; }

    /* ✅ Points d’attention (panneau attention) */
    .warn{
      display:flex;
      gap:.6rem;
      align-items:flex-start;
      padding:.6rem .7rem;
      border:1px solid var(--warn-line);
      background: var(--warn-bg);
      border-radius: 14px;
      color: var(--warn-ink);
      font-size:.9rem;
      line-height:1.35;
      font-weight:750;
    }
    .warnIcon{
      width: 24px;
      height: 24px;
      flex: 0 0 24px;
      margin-top: .05rem;
    }
    .warnIcon svg{
      width: 24px;
      height: 24px;
      stroke: var(--warn-ink);
      fill:none;
      stroke-width:2.2;
      stroke-linecap:round;
      stroke-linejoin:round;
    }

    .actions{
      display:flex;
      gap:.6rem;
      margin-top:auto;
      flex-wrap:wrap;
    }
    .btn{
      border:1px solid var(--line);
      background:white;
      border-radius: 999px;
      padding: .55rem .75rem;
      cursor:pointer;
      font-weight:900;
      font-size:.85rem;
      color:#111827;
      display:inline-flex;
      align-items:center;
      gap:.45rem;
    }
    .btnPrimary{
      background:#111827;
      color:white;
      border-color:#111827;
    }
    .btn:active{ transform: translateY(1px); }

    /* Modal */
    .modalOverlay{
      position:fixed;
      inset:0;
      background: rgba(2,6,23,.62);
      display:none;
      align-items:center;
      justify-content:center;
      padding: 1rem;
      z-index:100;
    }
    .modal{
      width: min(980px, 100%);
      max-height: min(86vh, 860px);
      overflow:auto;
      background:white;
      border-radius: 22px;
      box-shadow: var(--shadow2);
      border: 1px solid rgba(255,255,255,.22);
    }
    .modalTop{
      padding: .9rem 1rem;
      border-bottom:1px solid var(--line);
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap:1rem;
      position:sticky;
      top:0;
      background:white;
      z-index:2;
    }
    .modalTop h2{
      margin:0;
      font-size: 1.15rem;
      font-weight: 950;
      line-height:1.2;
    }
    .modalTop .meta{
      margin-top:.2rem;
      color: var(--muted);
      font-size:.9rem;
      font-weight:900;
    }
    .closeBtn{
      border:1px solid var(--line);
      background:white;
      border-radius: 999px;
      padding:.45rem .7rem;
      cursor:pointer;
      font-weight:950;
    }
    .modalBody{
      padding: 1rem;
      display:grid;
      grid-template-columns: 1fr;
      gap: .9rem;
    }
    .panel{
      border:1px solid var(--line);
      border-radius: 18px;
      padding: .85rem .9rem;
      background: #fbfbfd;
    }
    .panel h3{
      margin:.1rem 0 .55rem;
      font-size: .98rem;
      font-weight: 950;
    }
    .kv{
      display:grid;
      grid-template-columns: 170px 1fr;
      gap:.4rem .8rem;
      align-items:start;
      font-size:.95rem;
      line-height:1.38;
    }
    @media (max-width: 620px){
      .kv{ grid-template-columns: 1fr; }
      .kv .k{ margin-top:.35rem; }
    }
    .k{
      color: var(--muted);
      font-weight: 950;
      text-transform: uppercase;
      letter-spacing:.3px;
      font-size:.78rem;
    }
    .v{
      color: var(--ink);
      font-weight: 700;
    }

    mark{
      background: #fde68a;
      padding: 0 .15em;
      border-radius: .25em;
    }

    .empty{
      margin: 1.1rem 0;
      padding: 1rem;
      border: 1px dashed rgba(15,23,42,.18);
      border-radius: 18px;
      background: rgba(255,255,255,.65);
      color: var(--muted);
      font-weight: 900;
    }
  </style>
</head>

<body>
<header>
  <div class="wrap">
    <div class="topbar">
      <div>
        <h1>#jeminforme #jedécode #jegardelespritcritique</h1>
        <div class="subtitle">Une boîte à outils de terrain : chaque méthode en tuile, avec descriptif détaillé, objectifs (“pour quoi”) et points d’attention.</div>
      </div>

      <div class="searchRow">
        <input id="search" type="search" placeholder="Rechercher un mot-clé (titre, objectif, attention, protocole, exemple…)" />
        <button class="pill" id="clearBtn" title="Effacer la recherche">✕ Effacer</button>
      </div>
    </div>

    <div class="cats" id="catMenu" aria-label="Catégories"></div>
  </div>
</header>

<main>
  <div class="wrap">
    <div id="count" class="empty" style="display:none;"></div>
    <section class="grid" id="grid" aria-label="Liste des exercices"></section>
    <div id="nores" class="empty" style="display:none;">Aucun résultat. Essaie un autre mot-clé ou change de catégorie.</div>
  </div>
</main>

<!-- Modal -->
<div class="modalOverlay" id="overlay" role="dialog" aria-modal="true" aria-label="Détails de l'exercice">
  <div class="modal" id="modal">
    <div class="modalTop">
      <div>
        <h2 id="mTitle">Titre</h2>
        <div class="meta" id="mMeta">Meta</div>
      </div>
      <button class="closeBtn" id="closeBtn">Fermer</button>
    </div>
    <div class="modalBody">
      <div class="panel">
        <h3>Descriptif (détaillé)</h3>
        <div class="v" id="mDesc"></div>
      </div>

      <div class="panel">
        <h3>Exemple</h3>
        <div class="v" id="mExample"></div>
      </div>

      <div class="panel">
        <h3>Objectifs (“pour quoi”)</h3>
        <div class="v" id="mGoals"></div>
      </div>

      <div class="panel">
        <h3>Points d’attention</h3>
        <div class="warn" id="mWarn"></div>
      </div>

      <div class="panel">
        <h3>Protocole (qui / quoi / comment / combien / quand / où / pourquoi / pour quoi)</h3>
        <div class="kv" id="mProto"></div>
      </div>

      <div class="panel">
        <h3>Variantes</h3>
        <div class="v" id="mVar"></div>
      </div>

      <div class="panel">
        <h3>Mots-clés</h3>
        <div class="v" id="mTags"></div>
      </div>
    </div>
  </div>
</div>

<script>
  /* =========================
     Catégories
     ========================= */
  const CATEGORIES = [
    { id:"all",    label:"Toutes",      dot:"#ffffff" },
    { id:"obs",    label:"Observer",     dotVar:"--cat-obs"   },
    { id:"inter",  label:"Interroger",   dotVar:"--cat-inter" },
    { id:"imm",    label:"S’immerger",   dotVar:"--cat-imm"   },
    { id:"parc",   label:"Parcours",     dotVar:"--cat-parc"  },
    { id:"exp",    label:"Expérimenter", dotVar:"--cat-exp"   },
    { id:"suivi",  label:"Suivre/Veiller", dotVar:"--cat-suivi" },
    { id:"inv",    label:"Inventorier/Classer", dotVar:"--cat-inv" },
    { id:"lang",   label:"Langage",     dotVar:"--cat-lang"  },
    { id:"meta",   label:"Composer",    dotVar:"--cat-meta"  },
  ];

  function catBadge(catId){
    const label = CATEGORIES.find(x=>x.id===catId)?.label || "Catégorie";
    const bg = (catId==="obs") ? "var(--cat-obs)"
            : (catId==="inter") ? "var(--cat-inter)"
            : (catId==="imm") ? "var(--cat-imm)"
            : (catId==="parc") ? "var(--cat-parc)"
            : (catId==="exp") ? "var(--cat-exp)"
            : (catId==="suivi") ? "var(--cat-suivi)"
            : (catId==="inv") ? "var(--cat-inv)"
            : (catId==="lang") ? "var(--cat-lang)"
            : "var(--cat-meta)";
    return { label, bg };
  }

  /* =========================
     Données (Exercices 1–19)
     ✅ Descriptifs plus détaillés
     ✅ Objectifs “pour quoi” renforcés
     ✅ Points d’attention ajoutés
     ========================= */

  const EX = [
    {
      id:1, title:"Arpentage minutieux", cat:"obs",
      desc:"Choisis un lieu ordinaire et cadre-le strictement (un coin de cour, un arrêt de bus, un bout de place). Reste sur place assez longtemps pour laisser apparaître des régularités : micro-gestes, distances entre personnes, parcours répétitifs, rythmes (arrivées/départs), interactions avec les objets. Décris sans interpréter trop vite : ce que tu vois/entends/sens, la disposition matérielle, les flux et les zones plus ou moins “habitées”. Ajoute un croquis de situation (où sont les éléments, où tu te places).",
      example:"Arrêt de bus : noter les positions (assis/debout), les distances, qui consulte son téléphone, le rapport aux horaires, les entrées/sorties, les “points de friction” (passage étroit, pluie, bruit).",
      goals:"Rendre visible le banal : apprendre à décrire finement avant d’expliquer ; repérer des routines et des contraintes ; produire un matériau de terrain exploitable (croquis + notes) pour une analyse ultérieure.",
      attention:"Ne pas “deviner” des intentions : d’abord décrire. Faire attention au droit à l’image si tu photographies. Choisir une position d’observation discrète et non intrusive.",
      proto:{
        "Qui":"Toi comme observateur ; usagers du lieu (interaction facultative).",
        "Quoi":"Une scène ordinaire + son organisation spatiale et matérielle.",
        "Comment":"Notes structurées + croquis ; description sensorielle ; repérage des flux.",
        "Combien":"20–40 min (minimum), idéalement 2 passages.",
        "Quand":"Deux moments contrastés (matin/soir) si possible.",
        "Où":"Zone délimitée avec plan simple.",
        "Pourquoi":"S’entraîner à l’observation rigoureuse.",
        "Pour quoi":"Fiche de terrain + croquis annoté réutilisable."
      },
      variants:"Variante : focus sur un seul canal (uniquement sons / uniquement visuel).",
      tags:["observation","description","zone","croquis","routines"],
      icon:"eye"
    },

    {
      id:2, title:"Relevé de traces", cat:"obs",
      desc:"Lis un lieu à travers ce qu’il “garde” : usure, réparations, déchets, marques au sol, affiches, graffitis, traces de pneus, mobilier déplacé. Chaque trace est un indice d’usage : elle raconte ce qui s’est produit, qui est passé, et comment l’espace est pratiqué. L’objectif est de produire une collection d’indices, puis une typologie (types de traces) et des hypothèses prudentes.",
      example:"Couloir d’école : zones d’usure, affichages sauvages, “coins” où l’on s’adosse, traces de chaussures, scotch, mobilier déplacé.",
      goals:"Comprendre l’écart entre usage prévu et usage réel ; apprendre à inférer avec prudence ; construire une typologie d’indices qui permet de comparer des lieux ou des périodes.",
      attention:"Ne pas attribuer trop vite une trace à un groupe/personne. Distinguer observation (trace) et interprétation (hypothèse). Photos : attention aux personnes reconnaissables en arrière-plan.",
      proto:{
        "Qui":"Toi ; les usagers “indirectement” via leurs traces.",
        "Quoi":"Indices matériels (traces) et leur distribution spatiale.",
        "Comment":"Photos/croquis + inventaire ; regrouper par familles ; hypothèses prudentes.",
        "Combien":"15–30 min ; 20 traces minimum.",
        "Quand":"Moment calme (moins de flux) + éventuellement après un événement.",
        "Où":"Lieu cadré (couloir, place, parc).",
        "Pourquoi":"Lire les pratiques à partir du matériel.",
        "Pour quoi":"Carte des traces + typologie + hypothèses argumentées."
      },
      variants:"Variante : comparaison entre deux lieux semblables.",
      tags:["traces","indices","usage","typologie","lecture"],
      icon:"footprints"
    },

    {
      id:3, title:"Cartographie sensible", cat:"obs",
      desc:"Produis une carte qui restitue l’expérience vécue : ambiances, émotions, intensités (bruit, lumière, odeurs), zones de confort/inconfort, repères personnels. L’objectif n’est pas la précision métrique, mais la mise en forme de perceptions et de “signaux” qui structurent ton parcours (ou celui d’un autre).",
      example:"Trajet maison–école : zones “bruyantes”, “apaisantes”, “stressantes”, repères (odeurs, lumières, passages étroits), points d’arrêt.",
      goals:"Relier espace et expérience ; rendre visible l’invisible (ambiances) ; comparer des perceptions (toi vs quelqu’un d’autre / jour vs nuit).",
      attention:"Bien expliciter ta légende (codes couleurs/symboles). Ne pas confondre ressenti et généralité : c’est une carte située (point de vue).",
      proto:{
        "Qui":"Toi (ou un petit groupe / un usager).",
        "Quoi":"Ambiances et perceptions spatiales sur un parcours.",
        "Comment":"Carte à main levée + légende + commentaires courts.",
        "Combien":"1 parcours + 20–30 min de mise au propre.",
        "Quand":"Pendant un trajet réel (pas “imaginé”).",
        "Où":"Parcours défini (départ/arrivée).",
        "Pourquoi":"Comprendre l’espace vécu.",
        "Pour quoi":"Carte sensible + texte d’accompagnement."
      },
      variants:"Variante : carte nocturne vs diurne, ou pluie vs beau temps.",
      tags:["carte","ambiances","perception","espace vécu"],
      icon:"map"
    },

    {
      id:4, title:"Observation d’un objet en situation", cat:"obs",
      desc:"Choisis un objet banal (banc, poubelle, fontaine, distributeur) et observe ses usages concrets : qui l’utilise, comment, quand, pour quoi, et ce qui “dérape” (détournements, usages imprévus). Note l’état de l’objet (abîmé, propre, réparé), sa position, son accessibilité, et ses relations avec d’autres éléments (panneaux, flux, abris).",
      example:"Poubelle de rue : types de dépôts, erreurs de tri, moments de saturation, gestes (hésitation, contournement), impact du vent/pluie.",
      goals:"Comprendre des pratiques à partir de la culture matérielle ; repérer des contraintes (design, emplacement) ; identifier des détournements signifiants.",
      attention:"Rester discret ; éviter de filmer/photographier des personnes sans accord. Noter ce qui est factuel (action observée) vs ce qui est interprété.",
      proto:{
        "Qui":"Toi ; usagers de l’objet (interaction non obligatoire).",
        "Quoi":"Un objet + ses usages et non-usages.",
        "Comment":"Grille simple (usager/usage/temps) + croquis de position.",
        "Combien":"30 min (ou 2×15).",
        "Quand":"Deux plages (forte/faible fréquentation).",
        "Où":"Objet localisé précisément.",
        "Pourquoi":"Lire le social dans l’objet.",
        "Pour quoi":"Fiche d’observation + mini-diagramme des usages."
      },
      variants:"Variante : 2–3 micro-entretiens pour valider les hypothèses.",
      tags:["objet","usage","pratiques","design","détournement"],
      icon:"object"
    },

    {
      id:5, title:"Micro-entretiens exploratoires", cat:"inter",
      desc:"Réalise des mini-entretiens pour compléter une observation : 2–4 questions ouvertes, centrées sur le vécu et les usages. L’idée est d’obtenir des formulations spontanées (mots, catégories, exemples concrets), pas un questionnaire “fermé”. Note aussi les hésitations, les termes utilisés, et les divergences entre personnes.",
      example:"Dans une place : “Vous venez ici pour quoi ?”, “C’est comment à certaines heures ?”, “Qu’est-ce qui vous dérange / vous plaît ?”.",
      goals:"Accéder au point de vue des acteurs ; repérer vocabulaire et catégories indigènes ; trianguler l’observation (ce que tu vois vs ce qu’ils disent).",
      attention:"Consentement clair ; anonymiser ; ne pas insister si la personne refuse. Éviter les questions orientées (“Vous trouvez pas que…?”).",
      proto:{
        "Qui":"Toi + 3–6 personnes (au hasard ou ciblées).",
        "Quoi":"Usages, perceptions, récits courts.",
        "Comment":"Questions ouvertes + relances ; notes ; enregistrement si accord.",
        "Combien":"3–6 entretiens (2–6 min).",
        "Quand":"Sur place, au bon moment (pas en pleine urgence).",
        "Où":"Terrain concerné.",
        "Pourquoi":"Comprendre l’action par le sens que donnent les acteurs.",
        "Pour quoi":"Synthèse : 3–5 idées + 3 citations anonymisées."
      },
      variants:"Variante : comparer deux profils (habitant / visiteur ; novice / habitué).",
      tags:["entretien","qualitatif","perception","triangulation"],
      icon:"bubbles"
    },

    {
      id:6, title:"Chaîne opératoire", cat:"obs",
      desc:"Décris une activité comme une suite d’étapes (avant/pendant/après) : gestes, outils, décisions, micro-choix. L’important est la logique pratique : qu’est-ce qui est indispensable ? qu’est-ce qui est improvisé ? où sont les “points de friction” ? Tu produis un schéma fléché clair, puis un commentaire.",
      example:"Acheter un sandwich : entrée → choix → commande → paiement → attente → récupération → consommation ; noter erreurs possibles, files, contraintes de temps.",
      goals:"Rendre visible l’organisation implicite d’une action ; comprendre contraintes et marges de manœuvre ; comparer des manières de faire (deux lieux / deux personnes).",
      attention:"Bien distinguer étape observée vs étape supposée. Si tu interroges une personne, ne pas la mettre en difficulté (questions simples).",
      proto:{
        "Qui":"Toi ; éventuellement un acteur qui réalise la tâche.",
        "Quoi":"Une activité répétée, en situation réelle.",
        "Comment":"Décomposer + schéma ; noter outils, temps, décisions.",
        "Combien":"1 activité (ou 2 pour comparer).",
        "Quand":"Quand l’activité se déroule.",
        "Où":"Lieu de l’action.",
        "Pourquoi":"Comprendre la logique des pratiques.",
        "Pour quoi":"Diagramme + commentaire (points de friction)."
      },
      variants:"Variante : novice vs expert ; ou “version idéale” vs “version réelle”.",
      tags:["processus","diagramme","gestes","organisation"],
      icon:"flow"
    },

    {
      id:7, title:"Portrait d’un lieu par objets", cat:"obs",
      desc:"Raconte un lieu à partir d’objets/indices choisis (10 minimum) : panneaux, mobilier, menus, tickets, traces, affiches. Chaque objet est décrit et interprété prudemment : que révèle-t-il sur le lieu (public, règles, économie, valeurs, usages) ? Tu organises ensuite l’ensemble sur un plan ou une planche.",
      example:"Place du village : bancs, annonces, poubelles, commerces, drapeaux, panneaux ; “ce que ça dit” du lieu.",
      goals:"Apprendre à sélectionner des indices pertinents ; construire une lecture territoriale à partir du matériel ; produire une restitution synthétique et partageable.",
      attention:"Ne pas tomber dans l’anecdote : relier chaque objet à une hypothèse argumentée. Photos : attention au droit à l’image.",
      proto:{
        "Qui":"Toi.",
        "Quoi":"10+ objets/indices significatifs d’un lieu.",
        "Comment":"Photo/croquis + annotation ; assemblage sur plan/planche.",
        "Combien":"10 à 20 objets.",
        "Quand":"Moment avec un peu de vie (si possible).",
        "Où":"Lieu cadré.",
        "Pourquoi":"Lire le social dans le matériel.",
        "Pour quoi":"Planche commentée + 5 idées clés."
      },
      variants:"Variante : deux lieux similaires comparés par objets.",
      tags:["indices","objet","territoire","restitution"],
      icon:"gallery"
    },

    {
      id:8, title:"Observation comparée", cat:"obs",
      desc:"Compare deux terrains (ou deux moments du même terrain) avec la même grille : flux, règles, ambiances, interactions, objets, accès. Le but est d’isoler des variables explicatives : organisation spatiale, publics, horaires, normes, dispositifs matériels.",
      example:"Deux cafétérias : files, bruit, disposition, types d’interactions, tempo du service.",
      goals:"Produire un raisonnement comparatif ; faire émerger des variables ; passer de l’observation à l’hypothèse argumentée.",
      attention:"Utiliser la même grille sinon la comparaison est biaisée. Noter le contexte (heure, météo, événement) qui peut tout changer.",
      proto:{
        "Qui":"Toi.",
        "Quoi":"Deux situations comparables.",
        "Comment":"Même grille + tableau comparatif.",
        "Combien":"2×20–30 min.",
        "Quand":"Même créneau si possible.",
        "Où":"Deux lieux distincts (ou même lieu à deux temps).",
        "Pourquoi":"Identifier variables et effets.",
        "Pour quoi":"Tableau + hypothèses (3 minimum)."
      },
      variants:"Variante : comparaison “jour/nuit” ou “semaine/week-end”.",
      tags:["comparaison","variables","grille","hypothèses"],
      icon:"compare"
    },

    {
      id:9, title:"Restitution créative", cat:"meta",
      desc:"Transforme un matériau de terrain en une forme de restitution : poster, mini-expo, fanzine, audio, carte interactive. Tu choisis un “fil” (question centrale) et une structure éditoriale (plan) pour rendre lisible ce que tu as collecté. L’objectif est la mise en sens : sélectionner, ordonner, légender, expliquer.",
      example:"Fanzine 6 pages : 1 page = 1 angle (sons, flux, traces, portraits, carte, conclusion).",
      goals:"Passer de la collecte à la communication ; apprendre la sélection (ce qu’on garde/écarte) ; produire un objet partageable qui soutient un propos.",
      attention:"Éviter l’accumulation : moins mais mieux. Toujours contextualiser (où/quand/comment) sinon la restitution perd son sens.",
      proto:{
        "Qui":"Toi (ou groupe).",
        "Quoi":"Matériau déjà collecté.",
        "Comment":"Choisir format + plan + légendes + titre/objectif.",
        "Combien":"1 rendu final (A3/A4/numérique).",
        "Quand":"Après la collecte.",
        "Où":"Atelier/classe.",
        "Pourquoi":"Donner sens et rendre partageable.",
        "Pour quoi":"Produit final + justification (10 lignes)."
      },
      variants:"Variante : exposition “mur” (cartes + citations + objets).",
      tags:["restitution","format","édition","synthèse"],
      icon:"book"
    },

    /* 10–19 : d’après tes pages */
    {
      id:10, title:"Entretiens informels", cat:"inter",
      desc:"Interroge des usagers du lieu (environ 10 personnes) pour obtenir une description ordinaire et située : ce que le lieu “est” pour eux, ce qu’on y fait, ce qu’on y évite, ce qui a changé. Prépare 3–4 thèmes (dont une question très ouverte) et privilégie des questions qui appellent des exemples (“racontez-moi une situation”).",
      example:"Place centrale : “Qu’est-ce qui fait l’identité de cet endroit ?” + “Un souvenir marquant ici ?” + “À quel moment c’est le plus agréable/désagréable ?”.",
      goals:"Accéder aux représentations sociales d’un espace ; repérer vocabulaire, catégories, phénomènes saillants ; produire une cartographie issue des discours (repères, territoires évoqués).",
      attention:"Consentement + anonymisation. Ne pas transformer l’échange en interrogatoire. Noter les mots exacts (utile pour analyser les catégories).",
      proto:{
        "Qui":"Toi + ~10 passants/usagers ; consentement et anonymisation.",
        "Quoi":"Représentations du lieu (réputation, souvenirs, phénomènes marquants).",
        "Comment":"Questions ouvertes + relances ; notes fidèles ; enregistrement si accord.",
        "Combien":"10 entretiens courts (3–8 min).",
        "Quand":"Moment avec flux (heure de pointe / week-end).",
        "Où":"Dans le lieu choisi (ou ses abords).",
        "Pourquoi":"Accéder au point de vue des acteurs.",
        "Pour quoi":"Synthèse + carte du territoire à partir des réponses ; comparaison avec observation."
      },
      variants:"Variantes : cartographie personnelle ; portrait biographique.",
      tags:["entretien","informel","lieu","représentations","carte"],
      icon:"bubbles"
    },

    {
      id:11, title:"Observation participante", cat:"imm",
      desc:"Participe réellement à une activité collective (association, atelier, visite, jardin partagé, etc.). L’idée est d’accéder à des informations que l’observation externe ne donne pas : règles implicites, division des rôles, manières de faire, “petits arrangements”. Pendant la participation : notes minimales. Après : écriture détaillée (à chaud) sur l’organisation et tes impressions.",
      example:"Repair café : aider à l’accueil, observer comment on diagnostique une panne, les échanges de savoirs, la place des outils, les rôles (expert/novice).",
      goals:"Comprendre de l’intérieur ; identifier normes implicites et coordination ; saisir le sens pratique des gestes et décisions ; construire un récit ethnographique structuré.",
      attention:"Toujours demander l’autorisation (au moins à un responsable). Ne pas gêner l’activité. Éviter de citer des personnes identifiables ; anonymiser.",
      proto:{
        "Qui":"Toi + membres du groupe ; permission en amont.",
        "Quoi":"Une activité collective et ses règles (rôles, échanges, non-dits).",
        "Comment":"Participation active ; écriture “à froid” ensuite.",
        "Combien":"1–3h + 30–60 min d’écriture.",
        "Quand":"Le jour de l’activité ; rédaction le soir.",
        "Où":"Lieu de l’activité.",
        "Pourquoi":"Accéder à des dimensions invisibles de l’extérieur.",
        "Pour quoi":"Compte rendu structuré (organisation + interactions + surprises)."
      },
      variants:"Variante : reproduction d’une activité ; commentaires de photos avec participants (accord).",
      tags:["immersion","participation","groupe","rôles","éthique"],
      icon:"handshake"
    },

    {
      id:12, title:"Parcours commentés", cat:"parc",
      desc:"Rendez-vous dans un lieu avec un usager. Pendant environ 20 minutes, il/elle te guide et commente ce qui compte : repères, ambiances, souvenirs, contraintes. Tu encourages une description sensorielle (visuel, sonore, olfactif, tactile, thermique…). Tu interviens peu : relances simples. Puis tu reconstruis un plan commenté qui recompose l’itinéraire et les points marquants.",
      example:"Quartier : zones évitées, endroits “calmes”, lieux de sociabilité ; bruit à certains carrefours ; odeurs près d’une boulangerie ; éclairage nocturne.",
      goals:"Accéder à l’expérience “en mouvement” et à la perception située ; cartographier des repères significatifs ; comparer des points de vue (si tu fais plusieurs parcours).",
      attention:"Accord si enregistrement. Ne pas imposer ton interprétation : laisser la personne choisir ce qui est important. Clarifier ce qui peut être partagé.",
      proto:{
        "Qui":"Toi + un usager régulier ; accord pour enregistrer.",
        "Quoi":"Expérience sensible d’un parcours + repères significatifs.",
        "Comment":"Marcher ensemble ; relances ; notes/enregistrement ; plan commenté.",
        "Combien":"~20 min + 20–40 min de restitution.",
        "Quand":"Moment représentatif (jour/nuit selon enjeu).",
        "Où":"Quartier/forêt/vallée/ensemble architectural.",
        "Pourquoi":"Obtenir des “comptes rendus de perception en mouvement”.",
        "Pour quoi":"Plan commenté + synthèse des aspects marquants."
      },
      variants:"Variante : filature (shadowing) ; diagnostic en marchant (collectif).",
      tags:["parcours","mobilité","sens","plan","usager"],
      icon:"route"
    },

    {
      id:13, title:"Perturbation volontaire", cat:"exp",
      desc:"Observe d’abord une situation normée (file d’attente, ascenseur, repas collectif) pour identifier les règles implicites. Puis adopte une conduite légèrement déplacée (sans danger) afin de provoquer des réactions : malaise, réprimandes, repositionnements, silence, humour. Répète quelques fois en laissant des pauses. Documente l’effet sur ton diagramme : comment la norme se manifeste quand elle est transgressée.",
      example:"Ascenseur : se placer dos aux portes ; noter regards, silence, repositionnement. File : avancer “trop” près, puis revenir en arrière.",
      goals:"Rendre visibles les normes tacites ; comprendre les mécanismes de régulation sociale ; apprendre à observer réactions et ajustements en situation.",
      attention:"Choisir une perturbation légère et non agressive. Stopper si tension forte. Ne pas humilier des personnes. Éthique : éviter les publics vulnérables.",
      proto:{
        "Qui":"Toi (acteur) + personnes présentes.",
        "Quoi":"Normes implicites et réactions.",
        "Comment":"Routine → perturbation → observation → répétition mesurée.",
        "Combien":"3–5 répétitions max.",
        "Quand":"Quand la situation se présente réellement.",
        "Où":"Lieu public ordinaire (sans risque).",
        "Pourquoi":"Faire apparaître ce qui est invisible en temps normal.",
        "Pour quoi":"Diagramme + analyse des réactions (types de régulation)."
      },
      variants:"Variante : comparer 2 lieux / 2 situations.",
      tags:["normes","interaction","expérience","routines"],
      icon:"warning"
    },

    {
      id:14, title:"Suivi de zone", cat:"suivi",
      desc:"Délimite une zone (un coin de parc, une parcelle de forêt, un jardin… ou une micro-zone domestique). Reviens régulièrement pour documenter l’évolution : photos, notes, sons, inscriptions, traces, météo, activités humaines/animales. La répétition fait émerger rythmes et typologies. À la fin, tu produis un fanzine/livret qui rend compte du suivi dans la durée.",
      example:"Carré 1m×1m : photos quotidiennes ; noter lumière, pluie, insectes, feuilles ; comparer semaine 1 vs semaine 4 ; livret final.",
      goals:"Apprendre l’observation au temps long ; repérer rythmes et cycles ; transformer des séries de données en typologies (catégories d’événements).",
      attention:"Être régulier (sinon on ne voit pas les rythmes). Noter le contexte à chaque passage (heure/météo). Respecter le lieu (ne rien dégrader).",
      proto:{
        "Qui":"Toi ; éventuellement co-observateurs.",
        "Quoi":"Évolution d’un micro-territoire.",
        "Comment":"Notes + photos + sons ; relectures ; séries.",
        "Combien":"Min 2 semaines (idéal 1–3 mois).",
        "Quand":"Rythme régulier (quotidien/2–3 fois semaine).",
        "Où":"Zone strictement délimitée.",
        "Pourquoi":"Comprendre dynamiques temporelles/hyperlocales.",
        "Pour quoi":"Fanzine/livret + typologies/rythmes."
      },
      variants:"Variante : représentation multi-échelle (7 distances/points de vue).",
      tags:["suivi","temps long","rythmes","fanzine"],
      icon:"clock"
    },

    {
      id:15, title:"Compilation thématique", cat:"suivi",
      desc:"Construis un dossier sur un thème suivi plusieurs mois. Tu collectes des extraits (articles, statistiques, images, sons, vidéos, posts d’experts, littérature grise) en consultant des sources 2–3 fois par semaine. Chaque pièce est annotée avec des mots-clés, et tu relis régulièrement les entrées précédentes. L’enjeu est cumulatif : tu fabriques un “réservoir” et tu apprends à organiser l’hétérogène.",
      example:"Thème “énergie solaire” : articles, schémas, modèles, citations, exemples locaux ; tags (coûts, stockage, esthétique, politiques).",
      goals:"Développer une démarche de veille ; construire un point de vue informé ; repérer évolutions, controverses, limites/opportunités ; préparer une analyse plus conséquente.",
      attention:"Toujours noter la source/date (sinon inutilisable). Éviter de tout garder : sélectionner et taguer. Relecture obligatoire pour donner du sens.",
      proto:{
        "Qui":"Toi (veilleur/collecteur).",
        "Quoi":"Un thème + corpus hétérogène.",
        "Comment":"Collecter/archiver ; taguer ; relire ; organiser.",
        "Combien":"2–3 sessions/semaine sur 1–2 mois (ou +).",
        "Quand":"Calendrier fixe (ex. lun/mer/ven).",
        "Où":"Dossier numérique/papier structuré.",
        "Pourquoi":"Rester informé et construire une vision.",
        "Pour quoi":"Dossier + index + synthèse (1–2 pages)."
      },
      variants:"Variante : carnet de citations (commonplace book) ; mini-newsletter.",
      tags:["veille","dossier","sources","tags","synthèse"],
      icon:"folder"
    },

    {
      id:16, title:"Inventaire matériel", cat:"inv",
      desc:"Sélectionne une pratique (champignons, skateboard, permaculture, etc.). Documente les objets impliqués (photos, extraits de conversations, dessins de gestes) et leurs relations : qui utilise quoi, quand, où, pourquoi, dans quel état, avec quelles références culturelles. Produis un diagramme-réseau qui rend compte des composantes (objets/lieux/acteurs) et des liens (achat, réparation, transmission, style, sécurité…).",
      example:"Permaculture : outils, graines, compost, lieux, savoirs, réseaux d’échange ; relier “apprendre”, “réparer”, “partager”, “contraintes”.",
      goals:"Comprendre une pratique via sa culture matérielle ; rendre visible un système d’objets et d’acteurs ; produire un modèle synthétique (réseau).",
      attention:"Éviter de devenir “collectionneur compulsif” : documenter plutôt que accumuler. Respecter la vie privée si inventaire au domicile (accord).",
      proto:{
        "Qui":"Toi + pratiquants (si possible).",
        "Quoi":"Objets, usages, états, relations.",
        "Comment":"Photos/notes/dessins ; inventaire ; diagramme légendé.",
        "Combien":"1–3 semaines ; 20 éléments min.",
        "Quand":"Pendant la pratique + temps de synthèse.",
        "Où":"Terrain de la pratique (spot/atelier/domicile).",
        "Pourquoi":"Voir la logique d’une pratique culturelle.",
        "Pour quoi":"Diagramme réseau + analyse courte."
      },
      variants:"Variante : relevé de détournements (objets bricolés, nouvelle fonction).",
      tags:["inventaire","objets","réseau","pratique","bricolage"],
      icon:"network"
    },

    {
      id:17, title:"Collecte idiomatique", cat:"lang",
      desc:"Choisis un domaine du quotidien que tu connais mal. En suivant une démarche de veille/inventaire (ex. 15 et 16), relève tous les mots/expressions dont le sens t’échappe : jargon technique, métaphores, références, emprunts à d’autres langues. Cherche les définitions (dictionnaires, forums, personnes du milieu) et produis un lexique accessible à un profane, organisé comme un abécédaire.",
      example:"Rugby : ruck, maul, essai de pénalité, chandelle… définition simple + exemple d’usage + petite illustration.",
      goals:"Comprendre une pratique par sa langue ; accéder à la logique des acteurs ; constituer un outil de médiation (lexique) et repérer les variations (sens selon groupes).",
      attention:"Vérifier les termes auprès de plusieurs sources (un forum peut être faux). Distinguer définition “officielle” et usage local. Citer les sources.",
      proto:{
        "Qui":"Toi ; éventuellement membres du milieu pour validation.",
        "Quoi":"Jargon, expressions, emprunts.",
        "Comment":"Collecter → chercher → valider → écrire définitions + exemples.",
        "Combien":"20–40 entrées minimum.",
        "Quand":"Sur plusieurs semaines.",
        "Où":"Terrain + web + dictionnaires + échanges.",
        "Pourquoi":"Saisir le sens et les catégories indigènes.",
        "Pour quoi":"Lexique abécédaire (profane-friendly)."
      },
      variants:"Variante : patois local (10 mots/expressions + dessins).",
      tags:["lexique","jargon","abécédaire","langage"],
      icon:"abc"
    },

    {
      id:18, title:"Collecter / Classer", cat:"inv",
      desc:"Choisis un type d’élément qui attire peu ton attention (panneaux, feuilles, sacs à dos, graffitis…). Pendant plusieurs semaines/mois, documente chaque rencontre par photo/dessin/texte. Note le maximum de similitudes et différences ; fais émerger des catégories ; organise-les en une classification plus ou moins probante (poster) avec familles et noms de catégories.",
      example:"Graffitis : familles (tags, slogans, fresques), supports, couleurs, localisation, thèmes ; poster final en arbre.",
      goals:"Apprendre le raisonnement typologique ; entraîner l’attention aux détails ; produire un outil de lecture (classification) et interroger ce que tes catégories révèlent de ton regard.",
      attention:"Les catégories ne sont jamais “neutres” : expliciter tes critères. Contextualiser les photos (où/quand). Respecter propriété privée/droit à l’image.",
      proto:{
        "Qui":"Toi ; éventuellement autres collecteurs pour diversifier.",
        "Quoi":"Un type d’objet/signe observé de façon répétée.",
        "Comment":"Collecte → comparaison → catégories → organisation → poster.",
        "Combien":"2–6 semaines ; 30 occurrences min.",
        "Quand":"Pendant déplacements habituels.",
        "Où":"Espace urbain (ou autre) ; zones multiples.",
        "Pourquoi":"Faire émerger structure et variations.",
        "Pour quoi":"Poster de classification + légende + critères."
      },
      variants:"Variantes : collecte d’objets ; comparaison culturelle (site de vente autre aire).",
      tags:["classification","typologie","collection","poster"],
      icon:"tree"
    },

    {
      id:19, title:"À vous (protocole personnel)", cat:"meta",
      desc:"Pour chaque territoire nouveau visité, définis ton protocole : quelles dimensions tu observes, comment tu collectes, et quel rendu tu produis. Tu peux combiner plusieurs méthodes (par exemple : une carte sensible + des micro-entretiens + un inventaire). L’idée est de construire un “observatoire portatif” et d’enrichir ta manière de faire au fil du temps.",
      example:"Nouveau quartier : 1) carte sensible (ambiances) ; 2) 5 micro-entretiens ; 3) inventaire de 12 objets ; 4) restitution en mini-fanzine.",
      goals:"Développer une méthode personnelle cohérente ; apprendre à choisir les bons outils selon le terrain ; intégrer une réflexion éthique (consentement, diffusion).",
      attention:"Penser à l’éthique dès le départ : droit à l’image, anonymisation, partage. Définir un format réaliste (temps disponible).",
      proto:{
        "Qui":"Toi ; selon protocole : passants/usagers/objets/lieux.",
        "Quoi":"Un territoire nouveau (loin ou proche).",
        "Comment":"Assembler 2–4 méthodes ; définir règles de collecte/tri.",
        "Combien":"1 protocole par territoire (1–3 séances).",
        "Quand":"Avant + pendant + après (préparer / collecter / restituer).",
        "Où":"Territoire choisi + espace de restitution.",
        "Pourquoi":"Cultiver la capacité à remarquer.",
        "Pour quoi":"Rendu + justification + charte éthique minimale."
      },
      variants:"Variante : créer une grille “éthique & diffusion” (options de partage).",
      tags:["méta","protocole","éthique","combinaison","restitution"],
      icon:"toolbox"
    }
  ];

  /* =========================
     Icônes (SVG noir/blanc)
     ========================= */
  function iconSVG(name){
    const s = {
      eye: `
        <svg viewBox="0 0 160 120" aria-hidden="true">
          <path d="M15 60c18-28 45-40 65-40s47 12 65 40c-18 28-45 40-65 40S33 88 15 60z"/>
          <circle cx="80" cy="60" r="16"/>
          <circle cx="86" cy="56" r="4"/>
        </svg>`,
      footprints: `
        <svg viewBox="0 0 160 120" aria-hidden="true">
          <path d="M55 85c6 0 12-6 12-18S61 40 55 40s-12 9-12 27 6 18 12 18z"/>
          <path d="M92 92c6 0 12-6 12-18S98 47 92 47s-12 9-12 27 6 18 12 18z"/>
          <path d="M40 96c10 6 22 6 34 0"/>
          <path d="M77 103c10 6 22 6 34 0"/>
          <path d="M47 34l-6-8M57 30l-2-10M67 34l4-8"/>
          <path d="M84 41l-6-8M94 37l-2-10M104 41l4-8"/>
        </svg>`,
      map: `
        <svg viewBox="0 0 160 120" aria-hidden="true">
          <path d="M20 30l40-12 40 12 40-12v72l-40 12-40-12-40 12z"/>
          <path d="M60 18v72M100 30v72"/>
          <path d="M40 58c10-16 28-16 38 0s28 16 42 0"/>
        </svg>`,
      object: `
        <svg viewBox="0 0 160 120" aria-hidden="true">
          <rect x="46" y="26" width="68" height="68" rx="10"/>
          <path d="M60 44h40M60 58h40M60 72h26"/>
          <circle cx="104" cy="72" r="4"/>
        </svg>`,
      bubbles: `
        <svg viewBox="0 0 160 120" aria-hidden="true">
          <path d="M22 30h72a10 10 0 0 1 10 10v22a10 10 0 0 1-10 10H60l-18 16v-16H22a10 10 0 0 1-10-10V40a10 10 0 0 1 10-10z"/>
          <path d="M86 56h40a10 10 0 0 1 10 10v16a10 10 0 0 1-10 10h-18l-14 12v-12H86a10 10 0 0 1-10-10V66a10 10 0 0 1 10-10z"/>
          <path d="M34 46h38M34 58h28"/>
        </svg>`,
      flow: `
        <svg viewBox="0 0 160 120" aria-hidden="true">
          <rect x="18" y="18" width="44" height="24" rx="8"/>
          <rect x="98" y="18" width="44" height="24" rx="8"/>
          <rect x="58" y="70" width="44" height="24" rx="8"/>
          <path d="M62 30h36"/>
          <path d="M80 42v28"/>
          <path d="M80 70l-8-8M80 70l8-8"/>
        </svg>`,
      gallery: `
        <svg viewBox="0 0 160 120" aria-hidden="true">
          <rect x="18" y="22" width="124" height="76" rx="12"/>
          <path d="M32 80l26-26 18 18 24-24 28 32"/>
          <circle cx="54" cy="44" r="6"/>
        </svg>`,
      compare: `
        <svg viewBox="0 0 160 120" aria-hidden="true">
          <rect x="18" y="24" width="56" height="72" rx="12"/>
          <rect x="86" y="24" width="56" height="72" rx="12"/>
          <path d="M34 44h24M34 60h18M34 76h28"/>
          <path d="M102 44h24M102 60h18M102 76h28"/>
          <path d="M74 60h12"/>
        </svg>`,
      book: `
        <svg viewBox="0 0 160 120" aria-hidden="true">
          <path d="M30 26h48a14 14 0 0 1 14 14v58H44a14 14 0 0 0-14 14V26z"/>
          <path d="M130 26H82a14 14 0 0 0-14 14v58h48a14 14 0 0 1 14 14V26z"/>
          <path d="M48 44h28M48 58h20M92 44h28M92 58h20"/>
        </svg>`,
      handshake: `
        <svg viewBox="0 0 160 120" aria-hidden="true">
          <path d="M26 66l22-22c8-8 20-8 28 0l4 4"/>
          <path d="M134 66l-22-22c-8-8-20-8-28 0l-4 4"/>
          <path d="M62 54l-12 12c-6 6-6 16 0 22 6 6 16 6 22 0l8-8"/>
          <path d="M98 54l12 12c6 6 6 16 0 22-6 6-16 6-22 0l-8-8"/>
          <path d="M72 74l16 16"/>
        </svg>`,
      route: `
        <svg viewBox="0 0 160 120" aria-hidden="true">
          <path d="M40 18c10 20 0 30 0 46s10 26 20 26 20-10 20-26-10-26-20-26"/>
          <path d="M100 18c-10 20 0 30 0 46s-10 26-20 26-20-10-20-26"/>
          <path d="M40 18h60"/>
          <path d="M78 44h4M78 60h4M78 76h4"/>
        </svg>`,
      warning: `
        <svg viewBox="0 0 160 120" aria-hidden="true">
          <path d="M80 18l62 92H18z"/>
          <path d="M80 50v26"/>
          <path d="M80 88h.01"/>
        </svg>`,
      clock: `
        <svg viewBox="0 0 160 120" aria-hidden="true">
          <circle cx="80" cy="60" r="42"/>
          <path d="M80 60V38"/>
          <path d="M80 60l20 12"/>
          <path d="M52 18l-10 12M108 18l10 12"/>
        </svg>`,
      folder: `
        <svg viewBox="0 0 160 120" aria-hidden="true">
          <path d="M20 36h48l12 12h60v52a12 12 0 0 1-12 12H32a12 12 0 0 1-12-12V36z"/>
          <path d="M20 48h120"/>
        </svg>`,
      network: `
        <svg viewBox="0 0 160 120" aria-hidden="true">
          <circle cx="40" cy="40" r="10"/>
          <circle cx="120" cy="40" r="10"/>
          <circle cx="80" cy="78" r="10"/>
          <path d="M48 45l24 24M112 45L88 69M50 40h60"/>
          <path d="M80 88v18"/>
          <path d="M68 106h24"/>
        </svg>`,
      abc: `
        <svg viewBox="0 0 160 120" aria-hidden="true">
          <rect x="34" y="18" width="92" height="84" rx="12"/>
          <path d="M52 40l8-16 8 16M55 34h10"/>
          <path d="M78 48V24h14c8 0 8 12 0 12H78"/>
          <path d="M78 48h14c10 0 10 14 0 14H78"/>
          <path d="M116 34c-4-6-18-6-18 6s14 12 18 6"/>
          <path d="M52 72h60"/>
          <path d="M52 86h44"/>
        </svg>`,
      tree: `
        <svg viewBox="0 0 160 120" aria-hidden="true">
          <rect x="60" y="18" width="40" height="18" rx="8"/>
          <path d="M80 36v18"/>
          <rect x="26" y="54" width="40" height="18" rx="8"/>
          <rect x="94" y="54" width="40" height="18" rx="8"/>
          <path d="M80 54h-34M80 54h34"/>
          <path d="M46 72v16M114 72v16"/>
          <rect x="18" y="88" width="56" height="18" rx="8"/>
          <rect x="86" y="88" width="56" height="18" rx="8"/>
        </svg>`,
      toolbox: `
        <svg viewBox="0 0 160 120" aria-hidden="true">
          <path d="M38 44h84a12 12 0 0 1 12 12v40H26V56a12 12 0 0 1 12-12z"/>
          <path d="M56 44v-8a10 10 0 0 1 10-10h28a10 10 0 0 1 10 10v8"/>
          <path d="M26 68h108"/>
          <path d="M72 68v10h16V68"/>
        </svg>`
    };
    return s[name] || s.object;
  }

  /* ✅ Icône panneau attention */
  function warnIcon(){
    return `
      <div class="warnIcon" aria-hidden="true">
        <svg viewBox="0 0 24 24">
          <path d="M12 3l10 18H2z"/>
          <path d="M12 9v5"/>
          <path d="M12 17h.01"/>
        </svg>
      </div>
    `;
  }

  /* =========================
     Recherche + surlignage
     ========================= */
  const escapeHTML = (s) => (s ?? "").replace(/[&<>"']/g, m => ({
    "&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"
  }[m]));

  function highlight(text, q){
    const safe = escapeHTML(text);
    if(!q) return safe;
    const re = new RegExp(`(${q.replace(/[.*+?^${}()|[\]\\]/g, '\\$&')})`, "ig");
    return safe.replace(re, "<mark>$1</mark>");
  }

  /* =========================
     UI / Rendu
     ========================= */
  const grid = document.getElementById("grid");
  const search = document.getElementById("search");
  const clearBtn = document.getElementById("clearBtn");
  const catMenu = document.getElementById("catMenu");
  const nores = document.getElementById("nores");
  const count = document.getElementById("count");

  let activeCat = "all";

  function renderCatMenu(){
    catMenu.innerHTML = "";
    CATEGORIES.forEach(c=>{
      const btn = document.createElement("button");
      btn.className = "catBtn" + (c.id===activeCat ? " active":"");
      const dot = document.createElement("span");
      dot.className = "catDot";

      if(c.id==="all"){
        dot.style.background = "rgba(255,255,255,.9)";
      }else{
        dot.style.background = `var(${c.dotVar})`;
      }
      btn.appendChild(dot);
      btn.appendChild(document.createTextNode(c.label));
      btn.addEventListener("click", ()=>{
        activeCat = c.id;
        renderCatMenu();
        render();
      });
      catMenu.appendChild(btn);
    });
  }

  function matches(ex, q){
    if(!q) return true;
    const hay = [
      ex.title, ex.desc, ex.example, ex.goals, ex.attention,
      ex.variants,
      (ex.tags||[]).join(" "),
      Object.values(ex.proto||{}).join(" ")
    ].join(" ").toLowerCase();
    return hay.includes(q.toLowerCase());
  }

  function render(){
    const q = (search.value || "").trim();
    const filtered = EX.filter(ex=>{
      const catOk = (activeCat==="all" ? true : ex.cat===activeCat);
      const qOk = matches(ex, q);
      return catOk && qOk;
    });

    grid.innerHTML = "";
    filtered.forEach(ex => grid.appendChild(card(ex, q)));

    const total = filtered.length;
    nores.style.display = total ? "none" : "block";

    count.style.display = "block";
    count.textContent = `${total} exercice(s) — Catégorie : ${CATEGORIES.find(c=>c.id===activeCat)?.label || "—"}`
  }

  function card(ex, q){
    const c = document.createElement("article");
    c.className = "card";

    const badge = catBadge(ex.cat);

    c.innerHTML = `
      <div class="cardHeader">
        <div class="titleBlock">
          <div class="exNo">EXERCICE #${ex.id}</div>
          <div class="exTitle">${highlight(ex.title, q)}</div>
        </div>
        <div class="badge" style="background:${badge.bg}">${badge.label}</div>
      </div>

      <div class="iconWrap">${iconSVG(ex.icon)}</div>

      <div class="cardBody">
        <p class="miniDesc">${highlight(ex.desc, q)}</p>

        <div class="goalLine">
          🎯 Objectif : <span>${highlight(ex.goals, q)}</span>
        </div>

        <div class="warn">
          ${warnIcon()}
          <div><b>Attention :</b> ${highlight(ex.attention, q)}</div>
        </div>

        <details>
          <summary>
            Descriptif & exemple (détails)
            <span class="chev" aria-hidden="true"></span>
          </summary>
          <div class="detailText">
            <b>Descriptif :</b> ${highlight(ex.desc, q)}<br/>
            <b>Exemple :</b> ${highlight(ex.example, q)}
          </div>
        </details>

        <div class="actions">
          <button class="btn btnPrimary" data-open="${ex.id}">Ouvrir l’exercice</button>
          <button class="btn" data-copy="${ex.id}">Copier protocole</button>
        </div>
      </div>
    `;

    c.querySelector("[data-open]")?.addEventListener("click", ()=> openModal(ex.id, q));
    c.querySelector("[data-copy]")?.addEventListener("click", ()=> copyProto(ex.id));

    return c;
  }

  /* =========================
     Modal + contenu
     ========================= */
  const overlay = document.getElementById("overlay");
  const closeBtn = document.getElementById("closeBtn");

  const mTitle = document.getElementById("mTitle");
  const mMeta  = document.getElementById("mMeta");
  const mDesc  = document.getElementById("mDesc");
  const mExample = document.getElementById("mExample");
  const mGoals = document.getElementById("mGoals");
  const mWarn = document.getElementById("mWarn");
  const mProto = document.getElementById("mProto");
  const mVar = document.getElementById("mVar");
  const mTags = document.getElementById("mTags");

  function openModal(id, q){
    const ex = EX.find(x=>x.id===id);
    if(!ex) return;

    const badge = catBadge(ex.cat);

    mTitle.innerHTML = `EXERCICE #${ex.id} — ${highlight(ex.title, q)}`;
    mMeta.innerHTML = `Catégorie : <span class="badge" style="background:${badge.bg}; margin-left:.35rem;">${badge.label}</span>`;

    mDesc.innerHTML = highlight(ex.desc, q);
    mExample.innerHTML = highlight(ex.example, q);
    mGoals.innerHTML = highlight(ex.goals, q);

    mWarn.innerHTML = `${warnIcon()}<div><b>Attention :</b> ${highlight(ex.attention, q)}</div>`;

    const order = ["Qui","Quoi","Comment","Combien","Quand","Où","Pourquoi","Pour quoi"];
    mProto.innerHTML = "";
    order.forEach(k=>{
      const v = ex.proto?.[k] ?? "—";
      const kDiv = document.createElement("div");
      kDiv.className = "k";
      kDiv.textContent = k;
      const vDiv = document.createElement("div");
      vDiv.className = "v";
      vDiv.innerHTML = highlight(String(v), q);
      mProto.appendChild(kDiv);
      mProto.appendChild(vDiv);
    });

    mVar.innerHTML = highlight(ex.variants || "—", q);
    mTags.innerHTML = (ex.tags || []).map(t => `<span style="display:inline-block; margin:.2rem .25rem .2rem 0; padding:.25rem .5rem; border:1px solid var(--line); border-radius:999px; background:white; font-weight:900; font-size:.82rem;">${highlight(t, q)}</span>`).join("");

    overlay.style.display = "flex";
    document.body.style.overflow = "hidden";
  }

  function closeModal(){
    overlay.style.display = "none";
    document.body.style.overflow = "";
  }

  overlay.addEventListener("click", (e)=>{
    if(e.target === overlay) closeModal();
  });
  closeBtn.addEventListener("click", closeModal);
  document.addEventListener("keydown", (e)=>{
    if(e.key==="Escape") closeModal();
  });

  /* =========================
     Copier protocole
     ========================= */
  async function copyProto(id){
    const ex = EX.find(x=>x.id===id);
    if(!ex) return;
    const order = ["Qui","Quoi","Comment","Combien","Quand","Où","Pourquoi","Pour quoi"];
    let txt = `EXERCICE #${ex.id} — ${ex.title}\nCatégorie : ${catBadge(ex.cat).label}\n\n`;
    txt += `Descriptif : ${ex.desc}\n\n`;
    txt += `Objectifs (pour quoi) : ${ex.goals}\n\n`;
    txt += `Points d’attention : ${ex.attention}\n\n`;
    txt += `Exemple : ${ex.example}\n\n`;
    order.forEach(k=>{
      txt += `${k} : ${ex.proto?.[k] ?? "—"}\n`;
    });
    txt += `\nVariantes : ${ex.variants || "—"}\n`;
    txt += `Mots-clés : ${(ex.tags||[]).join(", ")}\n`;

    try{
      await navigator.clipboard.writeText(txt);
      toast("Contenu copié ✅");
    }catch{
      toast("Copie impossible (navigateur) — sélectionne et copie manuellement.");
    }
  }

  /* =========================
     Toast
     ========================= */
  function toast(msg){
    const el = document.createElement("div");
    el.textContent = msg;
    el.style.position = "fixed";
    el.style.left = "50%";
    el.style.bottom = "18px";
    el.style.transform = "translateX(-50%)";
    el.style.background = "#111827";
    el.style.color = "white";
    el.style.padding = ".6rem .85rem";
    el.style.borderRadius = "999px";
    el.style.fontWeight = "950";
    el.style.boxShadow = "0 10px 28px rgba(0,0,0,.25)";
    el.style.zIndex = "200";
    document.body.appendChild(el);
    setTimeout(()=>{ el.style.opacity="0"; el.style.transition="opacity .2s ease"; }, 1200);
    setTimeout(()=>{ el.remove(); }, 1500);
  }

  /* =========================
     Listeners
     ========================= */
  let t = null;
  search.addEventListener("input", ()=>{
    clearTimeout(t);
    t = setTimeout(render, 90);
  });

  clearBtn.addEventListener("click", ()=>{
    search.value = "";
    activeCat = "all";
    renderCatMenu();
    render();
    search.focus();
  });

  // Init
  renderCatMenu();
  render();
</script>

<!--
  ✅ GitHub Pages
  1) Dépôt GitHub → ajoute ce fichier comme index.html
  2) Settings → Pages → Deploy from branch → main / root
-->
</body>
</html>

