<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <title>#jeminforme#jedécode#jegardelespritcritique — Méthodes d’observation</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <style>
    :root{
      --bg:#f3f4f6;
      --ink:#0f172a;
      --muted:#475569;
      --card:#ffffff;
      --line:#e5e7eb;
      --shadow: 0 8px 24px rgba(15,23,42,.08);
      --shadow2: 0 12px 36px rgba(15,23,42,.12);
      --radius: 18px;

      /* Pastels catégories */
      --cat-obs:#cfe8ff;
      --cat-inter:#ffd9e6;
      --cat-imm:#d7f7e8;
      --cat-parc:#fff3c4;
      --cat-exp:#ffd9c2;
      --cat-suivi:#e6ddff;
      --cat-inv:#dff4ff;
      --cat-lang:#e9ffe0;
      --cat-meta:#eaeaea;

      /* Attention */
      --warn-bg:#fff7ed;
      --warn-line:#fed7aa;
      --warn-ink:#9a3412;

      --accent:#111827;
    }

    *{ box-sizing:border-box; }
    body{
      margin:0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      color:var(--ink);
      background:var(--bg);
    }

    header{
      background: linear-gradient(180deg, #111827, #0b1220);
      color:white;
      padding: 1.1rem 1rem 1rem;
      position: sticky;
      top:0;
      z-index: 50;
      box-shadow: 0 6px 20px rgba(0,0,0,.18);
    }
    .wrap{ max-width: 1200px; margin:0 auto; }

    .topbar{
      display:flex;
      gap:.8rem;
      align-items:flex-start;
      flex-wrap:wrap;
      justify-content:space-between;
    }

    h1{
      font-size: 1.05rem;
      margin:0;
      font-weight: 900;
      letter-spacing: .2px;
    }
    .subtitle{
      font-size: .85rem;
      color: rgba(255,255,255,.78);
      margin-top:.25rem;
      max-width: 70ch;
    }

    .searchRow{
      display:flex;
      gap:.5rem;
      align-items:center;
      flex: 1 1 520px;
      justify-content:flex-end;
    }
    .searchRow input{
      width: min(640px, 100%);
      padding: .75rem .9rem;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,.16);
      outline:none;
      color: white;
      background: rgba(255,255,255,.08);
      backdrop-filter: blur(6px);
    }
    .searchRow input::placeholder{ color: rgba(255,255,255,.65); }

    .pill{
      border: 1px solid rgba(255,255,255,.16);
      background: rgba(255,255,255,.08);
      color: rgba(255,255,255,.9);
      padding: .55rem .8rem;
      border-radius: 999px;
      cursor: pointer;
      font-size: .85rem;
      user-select:none;
    }

    /* Catégories sous recherche */
    .cats{
      display:flex;
      flex-wrap:wrap;
      gap:.5rem;
      margin-top:.8rem;
    }
    .catBtn{
      border: 1px solid rgba(255,255,255,.16);
      background: rgba(255,255,255,.08);
      color: rgba(255,255,255,.9);
      padding: .45rem .7rem;
      border-radius: 999px;
      cursor:pointer;
      font-size:.82rem;
      display:inline-flex;
      align-items:center;
      gap:.45rem;
      user-select:none;
    }
    .catDot{
      width: 10px;
      height: 10px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,.35);
      display:inline-block;
    }
    .catBtn.active{
      background: rgba(255,255,255,.18);
      border-color: rgba(255,255,255,.28);
    }

    main{
      max-width: 1200px;
      margin: 0 auto;
      padding: 1rem;
    }

    .grid{
      display:grid;
      grid-template-columns: repeat(3, minmax(0, 1fr));
      gap: 1rem;
      margin-top: .75rem;
    }
    @media (max-width: 980px){
      .grid{ grid-template-columns: repeat(2, minmax(0, 1fr)); }
      .searchRow{ justify-content:flex-start; }
    }
    @media (max-width: 620px){
      .grid{ grid-template-columns: 1fr; }
      .subtitle{ display:none; }
    }

    /* cartes simples */
    .card{
      background: var(--card);
      border: 1px solid var(--line);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      overflow:hidden;
      display:flex;
      flex-direction:column;
      min-height: 250px;
    }
    .cardHeader{
      padding: .85rem .95rem .6rem;
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap:.8rem;
    }
    .exNo{
      font-size:.78rem;
      color: var(--muted);
      font-weight:900;
      letter-spacing:.2px;
    }
    .exTitle{
      margin:.15rem 0 0;
      font-size: 1.08rem;
      line-height:1.2;
      font-weight:900;
    }

    .badge{
      padding: .35rem .6rem;
      border-radius: 999px;
      font-size:.78rem;
      font-weight:900;
      color:#111827;
      border:1px solid rgba(15,23,42,.08);
      white-space:nowrap;
    }

    .iconWrap{
      width:100%;
      background: #fafafa;
      border-top:1px dashed rgba(15,23,42,.08);
      border-bottom:1px solid var(--line);
      display:flex;
      align-items:center;
      justify-content:center;
      padding: 1rem;
    }
    .iconWrap svg{
      width: 120px;
      height: 90px;
      stroke:#111827;
      fill:none;
      stroke-width:2.2;
      stroke-linecap:round;
      stroke-linejoin:round;
      opacity:.92;
    }

    .cardBody{
      padding: .85rem .95rem 1rem;
      display:flex;
      flex-direction:column;
      gap:.7rem;
      flex:1;
    }

    .miniDesc{
      color: var(--muted);
      font-size:.92rem;
      line-height:1.38;
      margin:0;
      display:-webkit-box;
      -webkit-line-clamp:3;
      -webkit-box-orient: vertical;
      overflow:hidden;
    }

    .actions{
      display:flex;
      gap:.6rem;
      margin-top:auto;
      flex-wrap:wrap;
    }
    .btn{
      border:1px solid var(--line);
      background:white;
      border-radius: 999px;
      padding: .55rem .75rem;
      cursor:pointer;
      font-weight:900;
      font-size:.85rem;
      color:#111827;
      display:inline-flex;
      align-items:center;
      gap:.45rem;
    }
    .btnPrimary{
      background:#111827;
      color:white;
      border-color:#111827;
    }

    /* Modal */
    .modalOverlay{
      position:fixed;
      inset:0;
      background: rgba(2,6,23,.62);
      display:none;
      align-items:center;
      justify-content:center;
      padding: 1rem;
      z-index:100;
    }
    .modal{
      width: min(980px, 100%);
      max-height: min(86vh, 860px);
      overflow:auto;
      background:white;
      border-radius: 22px;
      box-shadow: var(--shadow2);
      border: 1px solid rgba(255,255,255,.22);
    }
    .modalTop{
      padding: .9rem 1rem;
      border-bottom:1px solid var(--line);
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap:1rem;
      position:sticky;
      top:0;
      background:white;
      z-index:2;
    }
    .modalTop h2{
      margin:0;
      font-size: 1.15rem;
      font-weight: 950;
      line-height:1.2;
    }
    .modalTop .meta{
      margin-top:.2rem;
      color: var(--muted);
      font-size:.9rem;
      font-weight:900;
    }
    .closeBtn{
      border:1px solid var(--line);
      background:white;
      border-radius: 999px;
      padding:.45rem .7rem;
      cursor:pointer;
      font-weight:950;
    }
    .modalBody{
      padding: 1rem;
      display:grid;
      grid-template-columns: 1fr;
      gap: .9rem;
    }

    details{
      border: 1px solid var(--line);
      border-radius: 18px;
      background:#fbfbfd;
      padding: .65rem .8rem;
    }
    summary{
      cursor:pointer;
      font-weight:950;
      font-size:.95rem;
      list-style:none;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:.6rem;
    }
    summary::-webkit-details-marker{ display:none; }
    .chev{
      width: 10px; height:10px;
      border-right: 2px solid #111827;
      border-bottom: 2px solid #111827;
      transform: rotate(45deg);
      opacity:.7;
      transition: transform .12s ease;
    }
    details[open] .chev{ transform: rotate(225deg); }

    .block{
      margin-top:.55rem;
      color: var(--ink);
      font-size:.95rem;
      line-height:1.45;
      font-weight: 700;
    }
    .muted{ color: var(--muted); font-weight:800; }

    .kv{
      display:grid;
      grid-template-columns: 170px 1fr;
      gap:.45rem .9rem;
      align-items:start;
      margin-top:.55rem;
      font-size:.95rem;
      line-height:1.45;
    }
    @media (max-width: 620px){
      .kv{ grid-template-columns: 1fr; }
    }
    .k{
      color: var(--muted);
      font-weight: 950;
      text-transform: uppercase;
      letter-spacing:.35px;
      font-size:.78rem;
    }
    .v{
      color: var(--ink);
      font-weight: 750;
    }

    .warn{
      display:flex;
      gap:.6rem;
      align-items:flex-start;
      padding:.75rem .8rem;
      border:1px solid var(--warn-line);
      background: var(--warn-bg);
      border-radius: 18px;
      color: var(--warn-ink);
      font-size:.95rem;
      line-height:1.4;
      font-weight:800;
      margin-top:.55rem;
    }
    .warnIcon{
      width: 26px; height: 26px; flex:0 0 26px;
      margin-top: .05rem;
    }
    .warnIcon svg{
      width: 26px; height: 26px;
      stroke: var(--warn-ink);
      fill:none;
      stroke-width:2.2;
      stroke-linecap:round;
      stroke-linejoin:round;
    }

    mark{
      background: #fde68a;
      padding: 0 .15em;
      border-radius: .25em;
    }

    .empty{
      margin: 1.1rem 0;
      padding: 1rem;
      border: 1px dashed rgba(15,23,42,.18);
      border-radius: 18px;
      background: rgba(255,255,255,.65);
      color: var(--muted);
      font-weight: 900;
    }
  </style>
</head>

<body>
<header>
  <div class="wrap">
    <div class="topbar">
      <div>
        <h1>#jeminforme #jedécode #jegardelespritcritique</h1>
        <div class="subtitle">
          Tuiles simples → tu ouvres et tu accèdes aux menus déroulants : précisions, exemple, protocole, attention.
        </div>
      </div>

      <div class="searchRow">
        <input id="search" type="search" placeholder="Rechercher un mot-clé (titre, protocole, exemple…)" />
        <button class="pill" id="clearBtn" title="Effacer la recherche">✕ Effacer</button>
      </div>
    </div>

    <div class="cats" id="catMenu" aria-label="Catégories"></div>
  </div>
</header>

<main>
  <div class="wrap">
    <div id="count" class="empty" style="display:none;"></div>
    <section class="grid" id="grid" aria-label="Liste des exercices"></section>
    <div id="nores" class="empty" style="display:none;">Aucun résultat. Essaie un autre mot-clé ou change de catégorie.</div>
  </div>
</main>

<!-- Modal -->
<div class="modalOverlay" id="overlay" role="dialog" aria-modal="true" aria-label="Détails de l'exercice">
  <div class="modal">
    <div class="modalTop">
      <div>
        <h2 id="mTitle">Titre</h2>
        <div class="meta" id="mMeta">Meta</div>
      </div>
      <button class="closeBtn" id="closeBtn">Fermer</button>
    </div>

    <div class="modalBody">
      <details open>
        <summary>Précisions de l’observation <span class="chev" aria-hidden="true"></span></summary>
        <div class="block" id="mDesc"></div>
        <div class="block" style="margin-top:.6rem;">
          <span class="muted">Objectifs (“pour quoi”) :</span>
          <span id="mGoals"></span>
        </div>
      </details>

      <details>
        <summary>Exemple concret <span class="chev" aria-hidden="true"></span></summary>
        <div class="block" id="mExample"></div>
      </details>

      <details>
        <summary>Protocole (qui / quoi / comment / …) <span class="chev" aria-hidden="true"></span></summary>
        <div class="kv" id="mProto"></div>
      </details>

      <details>
        <summary>Points d’attention <span class="chev" aria-hidden="true"></span></summary>
        <div class="warn" id="mWarn"></div>
      </details>

      <details>
        <summary>Variantes & mots-clés <span class="chev" aria-hidden="true"></span></summary>
        <div class="block"><span class="muted">Variantes :</span> <span id="mVar"></span></div>
        <div class="block" style="margin-top:.6rem;"><span class="muted">Mots-clés :</span> <span id="mTags"></span></div>
      </details>
    </div>
  </div>
</div>

<script>
  /* =========================
     Catégories
     ========================= */
  const CATEGORIES = [
    { id:"all",    label:"Toutes",         dot:"#ffffff" },
    { id:"obs",    label:"Observer",       dotVar:"--cat-obs"   },
    { id:"inter",  label:"Interroger",     dotVar:"--cat-inter" },
    { id:"imm",    label:"S’immerger",     dotVar:"--cat-imm"   },
    { id:"parc",   label:"Parcours",       dotVar:"--cat-parc"  },
    { id:"exp",    label:"Expérimenter",   dotVar:"--cat-exp"   },
    { id:"suivi",  label:"Suivre/Veiller", dotVar:"--cat-suivi" },
    { id:"inv",    label:"Inventorier/Classer", dotVar:"--cat-inv" },
    { id:"lang",   label:"Langage",        dotVar:"--cat-lang"  },
    { id:"meta",   label:"Composer",       dotVar:"--cat-meta"  },
  ];

  function catBadge(catId){
    const label = CATEGORIES.find(x=>x.id===catId)?.label || "Catégorie";
    const bg = (catId==="obs") ? "var(--cat-obs)"
            : (catId==="inter") ? "var(--cat-inter)"
            : (catId==="imm") ? "var(--cat-imm)"
            : (catId==="parc") ? "var(--cat-parc)"
            : (catId==="exp") ? "var(--cat-exp)"
            : (catId==="suivi") ? "var(--cat-suivi)"
            : (catId==="inv") ? "var(--cat-inv)"
            : (catId==="lang") ? "var(--cat-lang)"
            : "var(--cat-meta)";
    return { label, bg };
  }

  /* =========================
     Panneau attention (icône)
     ========================= */
  function warnIcon(){
    return `
      <div class="warnIcon" aria-hidden="true">
        <svg viewBox="0 0 24 24">
          <path d="M12 3l10 18H2z"/>
          <path d="M12 9v5"/>
          <path d="M12 17h.01"/>
        </svg>
      </div>
    `;
  }

  /* =========================
     Données — 19 exercices
     ========================= */
  const EX = [
    /* 1 */
    {
      id:1, title:"Arpentage minutieux", cat:"obs", icon:"eye",
      desc:"Délimite une micro-zone (ex. 10×10 m) et observe sans intervenir. Objectif : décrire finement les routines et la “chorégraphie” du lieu (positions, distances, trajectoires, micro-gestes), ainsi que la structure matérielle (mobilier, obstacles, signalétique). Produis des notes factuelles + un croquis d’implantation annoté (où sont les éléments et où tu te places).",
      example:"Arrêt de bus : noter positions (assis/debout), distances entre inconnus, zones d’abri, micro-déplacements quand quelqu’un arrive, consultation des horaires, sorties/entrées, effets de la pluie.",
      goals:"Développer une description rigoureuse avant toute interprétation ; repérer des régularités (routines) ; produire un matériau de terrain (notes + croquis) réutilisable pour une analyse.",
      attention:"Évite visages reconnaissables (photo) ; sépare “fait observé” et “interprétation” ; note ton propre point de vue (où tu te places) car il influence ce que tu vois.",
      proto:{
        "Qui":"Observateur : toi (posture = regarder/noter). Acteurs : usagers du lieu (anonymes).",
        "Quoi":"Comportements routiniers + organisation spatiale (flux, zones, distances) + contraintes matérielles.",
        "Comment":"1) Délimiter zone + point d’observation. 2) Notes en 2 colonnes (Faits / Hypothèses). 3) Croquis (plan simple + flèches + légende).",
        "Combien":"20–40 min ; idéal : 2 passages (même zone) pour comparer.",
        "Quand":"Deux moments contrastés (ex. matin vs midi).",
        "Où":"Zone précisément cadrée (repères stables).",
        "Pourquoi":"Apprendre à observer sans sur-interpréter.",
        "Pour quoi":"Une fiche de terrain + croquis légendé pour analyser/présenter ensuite."
      },
      variants:"Variante : n’observer qu’un seul paramètre (sons / distances / flux) pendant 15 minutes.",
      tags:["observation","description","zone","croquis","routines"]
    },

    /* 2 */
    {
      id:2, title:"Carte sensible d’un lieu", cat:"obs", icon:"map",
      desc:"Choisis un lieu et décris-le à travers les sens (visuel, sonore, olfactif, tactile, thermique). Tu construis une “carte sensible” : zones agréables/désagréables, intensités, repères, ambiances, micro-événements. Le but n’est pas l’exactitude topographique, mais la mise en forme de perceptions situées.",
      example:"Couloir d’école : zones bruyantes/calmes, endroits où on se bouscule, odeurs (cantine), points d’attente, variations selon la récré.",
      goals:"Mettre en mots et en schémas l’expérience vécue d’un espace ; relier ambiance et usages ; comparer perceptions entre personnes.",
      attention:"Ne pas confondre “j’aime/j’aime pas” avec “ce qui se passe” : note aussi ce qui est observable ; indique l’heure et le contexte (affluence).",
      proto:{
        "Qui":"Observateur : toi (et éventuellement un binôme pour comparer).",
        "Quoi":"Ambiances + perceptions + repères + intensités (sons, odeurs, températures, lumière).",
        "Comment":"1) Parcours lent 10–15 min. 2) Notes courtes + mots-clés. 3) Carte : zones + flèches + légende d’intensité (faible/moyen/fort).",
        "Combien":"20–30 min au total (terrain + mise au propre).",
        "Quand":"Deux créneaux (calme vs chargé) si possible.",
        "Où":"Lieu cadré (cour, rue, parc, bâtiment).",
        "Pourquoi":"Rendre visible le “ressenti” comme donnée.",
        "Pour quoi":"Une carte sensible légendée + 5 constats argumentés."
      },
      variants:"Variante : faire la carte à 2 et comparer (accords/désaccords) → mini-synthèse.",
      tags:["carte","ambiances","sens","perception","espace"]
    },

    /* 3 */
    {
      id:3, title:"Paysage sonore", cat:"obs", icon:"sound",
      desc:"Observe un lieu en te focalisant sur le son : sources, intensité, rythmes, distance, échos, silences. Produis un “profil sonore” (liste + schéma) et, si possible, un court relevé audio avec accord (ou simple description écrite).",
      example:"Place publique : cloches, circulation, voix, pas, livraisons, oiseaux. Noter ce qui domine et à quels moments.",
      goals:"Apprendre à isoler une dimension (sonore) ; repérer des rythmes et des marqueurs d’activité ; enrichir la description d’un espace au-delà du visuel.",
      attention:"Enregistrement : demander l’accord si des voix sont reconnaissables ; éviter de capter des conversations privées.",
      proto:{
        "Qui":"Observateur : toi.",
        "Quoi":"Sons (sources, intensité, direction, temporalité) + silences.",
        "Comment":"1) Se poser 10 min sans bouger. 2) Liste “ce que j’entends” + minute approximative. 3) Schéma en cercle (toi au centre, sources autour, distance).",
        "Combien":"15–25 min.",
        "Quand":"Moment représentatif + (option) comparaison (jour/nuit).",
        "Où":"Lieu fixe (banc, arrêt, hall, parc).",
        "Pourquoi":"Décrire un espace par ses signaux sonores.",
        "Pour quoi":"Un profil sonore (liste + schéma) et une courte analyse (dominantes/rythmes)."
      },
      variants:"Variante : “avant/après” un événement (arrivée d’un bus, sortie de classe).",
      tags:["son","rythmes","ambiance","description"]
    },

    /* 4 */
    {
      id:4, title:"Traces et indices", cat:"obs", icon:"footprints",
      desc:"Observe un lieu en cherchant des traces : usure, déchets, marques au sol, affichages, réparations, détournements, graffiti, objets oubliés. Le but est de reconstituer des usages probables à partir d’indices matériels, sans “inventer” trop vite.",
      example:"Escalier : marches polies, chewing-gums, affiches superposées, coin fumeur, traces de trottinettes, ruban adhésif de réparation.",
      goals:"S’entraîner à l’inférence prudente ; comprendre comment le matériel raconte les pratiques ; distinguer preuve/indice/hypothèse.",
      attention:"Ne pas transformer en “roman” : noter d’abord la trace, puis formuler une hypothèse explicitement (“peut-être…”).",
      proto:{
        "Qui":"Observateur : toi.",
        "Quoi":"Indices matériels (usure, dépôts, affichages, réparations) + localisation.",
        "Comment":"1) Parcours lent. 2) Photos de détails (si ok) ou croquis. 3) Tableau : Trace / Où / Hypothèse d’usage / Degré de certitude (faible/moyen/fort).",
        "Combien":"20–40 min.",
        "Quand":"N’importe quand ; idéal : après un pic d’activité.",
        "Où":"Espace public ou semi-public (école, gare, parc).",
        "Pourquoi":"Lire le social dans le matériel.",
        "Pour quoi":"Un inventaire d’indices + 5 hypothèses argumentées et prudentes."
      },
      variants:"Variante : se limiter à un type de trace (affiches / déchets / usure).",
      tags:["traces","indices","usages","matière","hypothèses"]
    },

    /* 5 */
    {
      id:5, title:"Mini-entretiens (questions naïves)", cat:"inter", icon:"chat",
      desc:"Pose 3–5 questions très simples à des usagers d’un lieu ou d’une pratique (avec accord). L’idée : obtenir un point de vue “ordinaire” et faire apparaître ce que les “experts du quotidien” trouvent évident, donc rarement expliqué.",
      example:"À la médiathèque : “Pourquoi vous venez ici plutôt qu’en ligne ?”, “Quels sont les moments les plus calmes ?”, “Qu’est-ce qui vous gêne ?”.",
      goals:"Multiplier les perspectives ; apprendre à formuler des questions ouvertes ; recueillir des justifications et des normes implicites.",
      attention:"Consentement + anonymisation ; ne pas insister si refus ; éviter questions intrusives.",
      proto:{
        "Qui":"Enquêteur : toi ; enquêtés : 2–5 personnes volontaires.",
        "Quoi":"Représentations, habitudes, raisons d’agir, problèmes/solutions perçus.",
        "Comment":"1) Se présenter (objectif + durée). 2) Questions ouvertes. 3) Noter mots exacts (ou audio avec accord). 4) Synthèse : thèmes récurrents.",
        "Combien":"2–5 entretiens de 3–7 min.",
        "Quand":"Sur place, moment ordinaire.",
        "Où":"Lieu lié à la pratique (sans gêner).",
        "Pourquoi":"Accéder au sens que les acteurs donnent à leurs actions.",
        "Pour quoi":"Une synthèse thématique + 3 citations courtes (anonymisées)."
      },
      variants:"Variante : comparer 2 profils (habitué vs nouveau venu).",
      tags:["entretien","point de vue","questions","anonymat"]
    },

    /* 6 */
    {
      id:6, title:"Diagramme de situation (qui fait quoi)", cat:"obs", icon:"diagram",
      desc:"Dans une situation courte (service, attente, réunion, entraînement), repère les rôles et interactions : qui initie, qui répond, qui contrôle, qui aide, qui attend. Représente la scène par un diagramme (acteurs + flèches + types d’échanges).",
      example:"Buvette sportive : serveur → client ; client → ami ; serveur → caisse ; file → ajustements ; “micro-règles” d’ordre.",
      goals:"Rendre visible une organisation sociale en action ; clarifier rôles, hiérarchies, coordinations ; structurer une observation complexe.",
      attention:"Ne pas “juger” : décrire les interactions ; attention aux interprétations sur intentions.",
      proto:{
        "Qui":"Observateur : toi ; acteurs : personnes impliquées (anonymes).",
        "Quoi":"Rôles, séquences, échanges, prises de décision, coordination.",
        "Comment":"1) Observer 10–15 min. 2) Liste des acteurs/rôles. 3) Diagramme : nœuds (acteurs) + flèches (actions/paroles). 4) Légende (commande/aide/contrôle/info).",
        "Combien":"20–30 min (terrain + schéma).",
        "Quand":"Pendant une situation routinière (pas exceptionnelle).",
        "Où":"Lieu où l’action est visible (sans gêner).",
        "Pourquoi":"Comprendre comment une activité “tient” collectivement.",
        "Pour quoi":"Un diagramme lisible + une courte explication (2–3 séquences clés)."
      },
      variants:"Variante : faire deux diagrammes (début vs fin) et comparer.",
      tags:["diagramme","rôles","interaction","organisation"]
    },

    /* 7 */
    {
      id:7, title:"Micro-événements (chronologie)", cat:"obs", icon:"list",
      desc:"Pendant 20 minutes, note tout ce qui change, même petit : arrivée/départ, changement de posture, interruption, regard, bruit soudain, regroupement. Ensuite, reconstitue une chronologie et repère des “déclencheurs” (ce qui fait bouger la situation).",
      example:"Hall : un groupe arrive → bruit augmente → d’autres s’éloignent → un agent intervient → retour au calme.",
      goals:"Apprendre à voir le changement (pas seulement le décor) ; repérer enchaînements et causalités plausibles ; construire un récit descriptif.",
      attention:"Rester factuel : “à 14:05, X se lève” plutôt que “il s’énerve”.",
      proto:{
        "Qui":"Observateur : toi.",
        "Quoi":"Changements et événements ; séquences ; déclencheurs possibles.",
        "Comment":"1) Timer 20 min. 2) Notes horodatées (même approximatives). 3) Mise au propre : frise chronologique + 3 hypothèses de déclencheurs (prudentes).",
        "Combien":"20 min + 10 min de mise au propre.",
        "Quand":"Moment représentatif ; possible comparaison 2 moments.",
        "Où":"Lieu où il se passe “quelque chose” (pas forcément spectaculaire).",
        "Pourquoi":"Saisir l’action en train de se faire.",
        "Pour quoi":"Une frise chronologique + 5 micro-événements significatifs."
      },
      variants:"Variante : un seul type d’événement (regards / déplacements / paroles).",
      tags:["chronologie","micro-événements","séquences"]
    },

    /* 8 */
    {
      id:8, title:"Comparaison de points de vue", cat:"inter", icon:"compare",
      desc:"Sur un même lieu/objet, recueille 2–4 points de vue différents (usager, habitué, novice, employé, etc.). L’objectif : comprendre ce qui est “évident” pour l’un et invisible pour l’autre, et cartographier les divergences d’attention.",
      example:"Skatepark : skateurs (règles implicites), riverains (nuisances), commune (gestion), novices (peur/curiosité).",
      goals:"Faire apparaître conflits d’interprétation ; identifier intérêts, contraintes, attentes ; apprendre à trianguler des données.",
      attention:"Neutralité : ne pas prendre parti pendant la collecte ; anonymiser ; reformuler fidèlement.",
      proto:{
        "Qui":"Enquêteur : toi ; enquêtés : 2–4 profils contrastés.",
        "Quoi":"Perceptions, problèmes, critères de qualité, règles implicites, émotions.",
        "Comment":"1) Même 4 questions pour tous. 2) Noter verbatim courts. 3) Tableau comparatif : profil / ce qui compte / ce qui gêne / solutions proposées.",
        "Combien":"2–4 entretiens de 5–10 min.",
        "Quand":"Sur place (ou juste après l’expérience).",
        "Où":"Lieu concerné, ou un endroit calme à proximité.",
        "Pourquoi":"Comprendre la pluralité des regards.",
        "Pour quoi":"Un tableau comparatif + une synthèse des convergences/divergences."
      },
      variants:"Variante : ajouter une “carte de désaccords” (où les perceptions divergent).",
      tags:["comparaison","points de vue","triangulation"]
    },

    /* 9 */
    {
      id:9, title:"Veille / observation à distance", cat:"suivi", icon:"screen",
      desc:"Choisis un thème/lieu/objet et observe-le via des sources (presse, rapports, réseaux, sites officiels, cartes, statistiques). Tu constitues une base d’extraits (texte/image) et tu notes ce que chaque source “met en avant”.",
      example:"Ton quartier : articles locaux, statistiques communales, posts Instagram, plans d’aménagement, avis Google, photos anciennes.",
      goals:"Comprendre comment un sujet est cadré selon les sources ; repérer biais, angles morts et contradictions ; construire un dossier exploitable.",
      attention:"Toujours noter la source + date ; distinguer fait, opinion, publicité ; éviter copier-coller massif (résumer).",
      proto:{
        "Qui":"Chercheur/veilleur : toi.",
        "Quoi":"Informations, cadrages, indicateurs, récits, images dominantes.",
        "Comment":"1) Définir 5 sources récurrentes. 2) Collecter 2–3 fois/semaine. 3) Fiche par item : source/date/angle/citation courte/mots-clés.",
        "Combien":"2–4 semaines (min) ; idéal 2–3 mois.",
        "Quand":"Rythme régulier (ex. lundi/jeudi).",
        "Où":"En ligne/hors-ligne (bibliothèque incluse).",
        "Pourquoi":"Observer indirectement et comparer des cadrages.",
        "Pour quoi":"Dossier thématique + synthèse (tendances/angles morts)."
      },
      variants:"Variante : ajouter une “ligne du temps” des événements médiatisés.",
      tags:["veille","sources","cadrage","dossier","temps long"]
    },

    /* 10 */
    {
      id:10, title:"Objectif focalisé (une seule question)", cat:"obs", icon:"target",
      desc:"Choisis une question unique et observable (“où se forment les regroupements ?”, “qui attend et où ?”, “quelles trajectoires dominent ?”). Tu observes uniquement cette question pendant 15–20 min. Le but : augmenter la précision et réduire le bruit.",
      example:"Cantine : “où se créent les files informelles ?” → repérer zones + déclencheurs (arrivée plateau, place libre).",
      goals:"Apprendre la focalisation ; produire une donnée claire ; éviter l’obsession du “tout noter”.",
      attention:"Ne pas élargir en cours de route : rester sur la question ; si tu changes, note le changement et recommence.",
      proto:{
        "Qui":"Observateur : toi.",
        "Quoi":"Un seul phénomène défini (variables simples : lieu, nombre, direction).",
        "Comment":"1) Formuler la question. 2) Choisir 2–3 indicateurs. 3) Relevé (compte/plan/trajectoires). 4) Conclusion : réponse + limites.",
        "Combien":"15–20 min + 10 min de synthèse.",
        "Quand":"Moment où le phénomène a des chances d’apparaître.",
        "Où":"Lieu ciblé (cadré).",
        "Pourquoi":"Gagner en précision.",
        "Pour quoi":"Une réponse argumentée + un petit schéma/compte."
      },
      variants:"Variante : répéter le lendemain (comparaison).",
      tags:["focalisation","indicateurs","précision"]
    },

    /* 11 (d’après ton image) */
    {
      id:11, title:"Observation participante", cat:"imm", icon:"hands",
      desc:"Participe à une activité collective avec accord (jardin partagé, repair café, visite guidée, maraude, cérémonie, club sportif). Tu aides réellement et tu observes “de l’intérieur” : rôles, non-dits, vocabulaire, règles implicites, manières de faire. Tu ne documentes pas sur le moment (ou très peu) ; tu rédiges ensuite au calme une description structurée (organisation + impressions/surprises).",
      example:"Repair café : arriver tôt, aider à l’accueil, observer qui sait quoi, comment on demande de l’aide, comment on “valide” une réparation, vocabulaire et blagues internes.",
      goals:"Accéder à des informations difficiles à obtenir à distance ; comprendre l’activité par l’expérience ; repérer règles implicites et coordination ; apprendre l’équilibre participation/recul.",
      attention:"Consentement clair ; ne pas “jouer l’espion” ; ne pas prendre de photos/sons sans accord ; prendre du recul après (risque d’immersion totale).",
      proto:{
        "Qui":"Toi = participant-observateur (rôle réel dans l’activité). Acteurs : membres/organisateurs (anonymisés).",
        "Quoi":"Organisation (rôles, séquences), échanges, vocabulaire, non-dits, règles implicites, ambiance.",
        "Comment":"1) Demander la permission + se présenter. 2) Participer (aider). 3) Mémo mental (mots-clés). 4) Notes au calme le soir : Faits / Interprétations / Surprises.",
        "Combien":"1 séance longue (1h30–3h) ; idéal : 2 séances.",
        "Quand":"Arriver en avance, rester longtemps, prolonger après la fin (moments informels).",
        "Où":"Dans le lieu de l’activité (au plus près de l’action).",
        "Pourquoi":"Observer ce que l’extérieur ne voit pas.",
        "Pour quoi":"Un récit structuré + schéma des rôles + 5 règles implicites repérées."
      },
      variants:"Variante : “reproduction” (tenter de refaire les gestes) ; Variante : commentaires de photos avec accord.",
      tags:["immersion","participation","règles implicites","vocabulaire"]
    },

    /* 12 (d’après ton image) */
    {
      id:12, title:"Parcours commentés", cat:"parc", icon:"walk",
      desc:"Rendez-vous dans un lieu (quartier, forêt, vallée, ensemble architectural) avec un usager régulier ou non. Pendant ~20 min, la personne te guide et commente ce qu’elle perçoit (ambiances, repères, souvenirs, dangers, plaisirs) en mobilisant les sens. Tu peux enregistrer avec accord. Ensuite, vous échangez et la personne produit un plan annoté qui reconstitue le chemin et les aspects marquants.",
      example:"Tour du quartier avec un élève : repères “importants”, coins évités, endroits “cool”, sons/odeurs, lieux de socialisation, trajets “efficaces”.",
      goals:"Accéder à une description ordinaire des lieux ; comprendre navigation, repères, attachements ; confronter plusieurs parcours pour faire émerger contraintes et potentialités d’un environnement.",
      attention:"Consentement (enregistrement) ; sécurité du parcours ; ne pas forcer un dévoilement intime ; anonymiser lieux sensibles si besoin.",
      proto:{
        "Qui":"Toi = accompagnateur (tu interviens peu). Guide = participant (usager du lieu).",
        "Quoi":"Commentaires en mouvement : repères, ambiances, sensations, raisons des choix de trajet.",
        "Comment":"1) Brief : “tu me guides comme tu veux”. 2) Questions naïves ponctuelles (“pourquoi ici ?”). 3) Notes/son (avec accord). 4) Fin : échange + plan annoté par le guide.",
        "Combien":"20–30 min de marche + 10–15 min de débrief.",
        "Quand":"Créneau où le lieu est “vivant” (ou au contraire calme, selon objectif).",
        "Où":"Parcours choisi par le guide.",
        "Pourquoi":"Comprendre l’espace vécu (pas seulement l’espace cartographié).",
        "Pour quoi":"Un plan commenté + 5 repères clés + une synthèse des critères du guide."
      },
      variants:"Variante : “filature/shadowing” (suivre 1–2h avec notes rapides).",
      tags:["parcours","commentaire","sens","plan","usager"]
    },

    /* 13 (d’après ton image) */
    {
      id:13, title:"Perturbation volontaire", cat:"exp", icon:"warning",
      desc:"1) Observe une situation très normée (file, ascenseur, repas collectif) pour repérer les règles implicites (distance, ordre, regard, posture). 2) Fais une transgression légère et réversible (pas agressive) pour rendre visibles les mécanismes de régulation (regards, remarques, repositionnements, humour, silence). 3) Répète 2–5 fois avec pauses et note l’évolution.",
      example:"Ascenseur : te placer dos aux portes. File : te mettre “trop près” (sans toucher), puis reculer. Repérer réactions et ajustements.",
      goals:"Mettre au jour les normes non-dites ; observer comment un groupe “répare” l’ordre social ; comprendre sanctions/ajustements en situation.",
      attention:"Perturbation douce ; stop si malaise fort ; éviter publics vulnérables ; ne pas filmer ; ne pas humilier.",
      proto:{
        "Qui":"Toi = acteur-expérimentateur ; personnes présentes = public observé (anonymisé).",
        "Quoi":"Normes implicites + réactions (regard, distance, parole, repositionnement, rappel à l’ordre).",
        "Comment":"A) Observation “normale” 5 min. B) Perturbation 10–20 s. C) Notes immédiates + typologie (silence/évitement/interpellation/humour).",
        "Combien":"2–5 perturbations max + pauses (1–3 min) entre interventions.",
        "Quand":"Moment ordinaire (pas en situation tendue).",
        "Où":"Lieu public simple, sans risque.",
        "Pourquoi":"Faire apparaître la norme quand elle est enfreinte.",
        "Pour quoi":"Diagramme “routine vs perturbation” + typologie des réactions + mini-analyse."
      },
      variants:"Variante : comparer deux lieux (école vs gare).",
      tags:["normes","interaction","expérience","routines"]
    },

    /* 14 (d’après ton image) */
    {
      id:14, title:"Suivi de zone", cat:"suivi", icon:"clock",
      desc:"Choisis une zone (1 m² à 50 m²) et reviens régulièrement pour documenter son évolution. Tu construis une série (photos/notes/sons) et tu relies les changements à des facteurs : météo, saisons, usages humains, événements. À la fin, tu synthétises en livret/fanzine (rythmes + typologies d’événements).",
      example:"Carré de parc : photo fixe à la même heure 3×/semaine ; noter lumière, feuilles, déchets, passage de chiens ; livret : “typologie des changements”.",
      goals:"Observer au temps long ; faire émerger rythmes et cycles ; apprendre la comparaison chronologique ; produire une restitution sérielle.",
      attention:"Régularité + même cadrage ; noter contexte (heure/météo) ; respecter le lieu (ne rien dégrader).",
      proto:{
        "Qui":"Observateur : toi (option : binôme pour fiabilité).",
        "Quoi":"Évolution d’un micro-territoire (traces, vivant, usages, ambiance).",
        "Comment":"Protocole fixe : même point photo + fiche contexte + 3 observations clés + 1 surprise.",
        "Combien":"Min 2 semaines ; idéal 1–3 mois. Fréquence : 2–3 fois/semaine (ou quotidien).",
        "Quand":"Créneau stable (ex. mardi/jeudi 17h).",
        "Où":"Zone délimitée (plan + repères stables).",
        "Pourquoi":"Comprendre dynamiques temporelles locales.",
        "Pour quoi":"Fanzine/livret : série + rythmes + typologies + commentaire."
      },
      variants:"Variante : représentation multi-échelle (7 distances).",
      tags:["suivi","temps long","rythmes","fanzine"]
    },

    /* 15 (d’après ton image) */
    {
      id:15, title:"Compilation thématique", cat:"suivi", icon:"folder",
      desc:"Constitue un dossier sur un thème (énergie solaire, plastique, ton quartier, QR codes…). Pendant plusieurs mois, collecte des extraits textuels, images, sons/vidéos, statistiques, rapports, posts, etc. Relis régulièrement ce que tu as collecté. Chaque pièce est annotée avec des mots-clés (et idéalement : source + date + angle).",
      example:"“Plastique” : 2 articles/semaine + 1 statistique + 1 exemple local ; tags : santé/tri/industrie/alternatives ; relecture mensuelle pour dégager 3 axes.",
      goals:"Construire une veille cumulative ; repérer cadrages récurrents ; transformer un “réservoir” hétérogène en thèmes structurés ; préparer une analyse ou une production (poster, article, fanzine).",
      attention:"Toujours noter source/date ; distinguer info/opinion/pub ; éviter l’accumulation sans relecture ; faire des résumés plutôt que copier-coller.",
      proto:{
        "Qui":"Collecteur/veilleur : toi.",
        "Quoi":"Matériaux variés (articles, stats, images, vidéos, rapports, conversations) sur un thème.",
        "Comment":"1) Définir 6–10 sources. 2) Collecter 2–3 fois/semaine. 3) Fiche par item : résumé 3 lignes + source/date + mots-clés + “pourquoi je garde”.",
        "Combien":"Min 4 semaines ; idéal 2–3 mois.",
        "Quand":"Rythme fixe (ex. lundi/jeudi).",
        "Où":"Dossier numérique (Drive/OneNote) ou classeur papier.",
        "Pourquoi":"Apprendre la veille et la structuration d’infos.",
        "Pour quoi":"Un dossier annoté + une synthèse (axes/controverses/évolutions)."
      },
      variants:"Variante : créer une “timeline” et une “carte des acteurs” du thème.",
      tags:["veille","dossier","sources","mots-clés","synthèse"]
    },

    /* 16 (d’après ton image) */
    {
      id:16, title:"Inventaire matériel", cat:"inv", icon:"box",
      desc:"Choisis une pratique (cueillette, skateboard, tuning, permaculture…) et documente les objets impliqués (photos, conversations, dessins de gestes). Produis un diagramme-réseau qui relie objets, personnes, lieux, et usages. L’objectif : montrer les multiples composantes d’une pratique culturelle et leurs relations.",
      example:"Skate : planche, trucks, roues, outils, spots, vidéos, shops, règles de cohabitation ; réseau : objets ↔ lieux ↔ personnes ↔ normes.",
      goals:"Comprendre une pratique par ses objets ; repérer chaînes d’usage et significations ; visualiser un système d’objets/gestes ; passer de la liste à la relation.",
      attention:"Ne pas “collecter” contre l’avis des gens ; demander l’accord pour photos/sons ; éviter d’envahir des espaces privés.",
      proto:{
        "Qui":"Observateur : toi ; participants : pratiquants volontaires (si échanges).",
        "Quoi":"Objets, gestes, vocabulaire, lieux, usages, états (abîmé/fonctionnel), trajectoires (achat/occasion).",
        "Comment":"1) Liste d’objets + photos/croquis. 2) Notes sur “qui utilise quoi, quand, où”. 3) Diagramme réseau (nœuds + flèches légendées : réparer/acheter/partager/transformer).",
        "Combien":"2–4 sorties/semaines sur 2–4 semaines (ou plus).",
        "Quand":"Moments de pratique réelle.",
        "Où":"Lieux de pratique (et, si accord, espaces de stockage/entretien).",
        "Pourquoi":"Voir la pratique comme système socio-matériel.",
        "Pour quoi":"Un inventaire illustré + un diagramme réseau commenté."
      },
      variants:"Variante : relevé de détournements (objets bricolés, modifiés, réparations).",
      tags:["inventaire","objets","diagramme","pratique","réseau"]
    },

    /* 17 (d’après ton image) */
    {
      id:17, title:"Collecte idiomatique", cat:"lang", icon:"abc",
      desc:"Choisis un domaine du quotidien que tu connais mal (météo, permaculture, jeu en ligne, rugby, rituels…). Pendant plusieurs semaines, relève tous les mots/expressions qui te sont inconnus (jargon, métaphores, anglicismes, emprunts). Cherche le sens (dico, forums, personnes) et construis un lexique accessible à un profane, organisé comme un abécédaire.",
      example:"Jeu vidéo en ligne : “nerf”, “meta”, “buff”, “MMR”, “smurf”, “tilt”… → définition simple + exemple de phrase + équivalent français.",
      goals:"Comprendre comment le langage structure une pratique ; accéder au sens “interne” ; développer une compétence d’enquête lexicale ; produire un outil de médiation.",
      attention:"Ne pas ridiculiser le jargon ; vérifier les sens auprès des pratiquants ; noter le contexte d’usage (quand/avec qui).",
      proto:{
        "Qui":"Collecteur : toi ; informateurs : pratiquants (option) + sources (dicos/forums).",
        "Quoi":"Mots/expressions inconnus + sens + contexte + exemples d’usage.",
        "Comment":"1) Liste brute en situation. 2) Recherche du sens (source). 3) Fiche terme : définition simple + exemple + variante/nuance. 4) Classement alphabétique.",
        "Combien":"Min 20 termes sur 2–4 semaines.",
        "Quand":"Au fil de la découverte du domaine (lecture, vidéos, pratique).",
        "Où":"En ligne + terrain (discussions).",
        "Pourquoi":"Accéder à la logique d’un groupe par sa langue.",
        "Pour quoi":"Un abécédaire (lexique) prêt à partager."
      },
      variants:"Variante : patois local (collecte de 10 mots/expressions liés au territoire).",
      tags:["lexique","jargon","langage","abécédaire","culture"]
    },

    /* 18 (d’après ton image) */
    {
      id:18, title:"Collecter / Classer", cat:"inv", icon:"tree",
      desc:"Sélectionne une chose qui attire rarement ton attention (sacs à dos, feuilles, manettes, panneaux, graffitis…). Pendant plusieurs semaines/mois, documente chaque rencontre (photo, dessin, court texte). Note similitudes/différences, identifie des catégories, puis propose une classification sous forme de poster (familles + critères).",
      example:"Panneaux d’interdiction : formes, pictos, couleurs, lieux, ton (sec/ironique), présence de traduction → familles de panneaux.",
      goals:"Apprendre à comparer ; créer des catégories ; expliciter des critères ; passer de l’observation à une typologie argumentée.",
      attention:"Ne pas “forcer” une classification : accepter des cas hybrides ; expliciter tes critères ; attention au droit à l’image si des personnes apparaissent.",
      proto:{
        "Qui":"Collecteur : toi (option : un binôme).",
        "Quoi":"Un type d’objet + ses variations (forme, matière, style, usage, contexte).",
        "Comment":"1) Collecte régulière (photo/dessin + lieu/date). 2) Tableau de critères. 3) Regroupements (familles). 4) Poster final (arbre, matrice, ou carte).",
        "Combien":"Min 15–30 items (idéal : 50+) sur 3–6 semaines.",
        "Quand":"Au fil des déplacements quotidiens.",
        "Où":"Espace public / trajets habituels.",
        "Pourquoi":"Construire un regard typologique sur l’ordinaire.",
        "Pour quoi":"Un poster de classification + une note expliquant les critères et exceptions."
      },
      variants:"Variante : collecte d’objets (petits artefacts) puis classification photographiée.",
      tags:["classification","typologie","catégories","poster","comparaison"]
    },

    /* 19 (d’après ton image) */
    {
      id:19, title:"À vous : protocole portable", cat:"meta", icon:"kit",
      desc:"Pour chaque territoire nouveau que tu visites (loin ou tout près), invente ton propre protocole d’observation portable inspiré des exercices précédents. Tu précises : critères d’observation, méthodes de collecte, et format de restitution. Objectif : construire ta “boîte à outils” et l’améliorer au fil du temps, en intégrant une réflexion éthique (consentement, vie privée, droit à l’image).",
      example:"Week-end dans une ville : 1) carte sensible (sons/odeurs), 2) inventaire de signalétiques, 3) 3 micro-entretiens, 4) mini-lexique local → restitution : 1 page + 1 carte + 1 poster.",
      goals:"Autonomiser la démarche ; combiner méthodes ; adapter au contexte ; réfléchir aux limites et à l’éthique ; produire un format clair et partageable.",
      attention:"Consentement/droit à l’image ; données sensibles (lieux/personnes) ; anonymisation ; ne pas “voler” des observations (photos volées / conversations privées).",
      proto:{
        "Qui":"Toi = auteur du protocole (tu choisis ta posture : observateur / participant / intervieweur).",
        "Quoi":"Ce qui “compte” dans le territoire (critères choisis : flux, ambiances, objets, normes, récits…).",
        "Comment":"Sélection de 2–4 méthodes (ex. carte sensible + traces + mini-entretiens + classement) + règles de prise de notes + critères d’arrêt.",
        "Combien":"Durée fixée à l’avance (ex. 60–120 min) + 30 min de mise au propre.",
        "Quand":"Avant/durant/après la visite (préparer → collecter → synthétiser).",
        "Où":"Territoire visité (cadrage : zone/itinéraire).",
        "Pourquoi":"Adapter l’enquête à chaque contexte.",
        "Pour quoi":"Un “kit” réutilisable : fiche protocole + restitution (1 page, fanzine, poster, audio…)."
      },
      variants:"Variante : créer un modèle de fiche (template) et le réutiliser partout.",
      tags:["méthode","protocole","éthique","restitution","autonomie"]
    }
  ];

  /* =========================
     Icônes (SVG noir/blanc)
     ========================= */
  function iconSVG(name){
    const s = {
      eye: `
        <svg viewBox="0 0 160 120" aria-hidden="true">
          <path d="M15 60c18-28 45-40 65-40s47 12 65 40c-18 28-45 40-65 40S33 88 15 60z"/>
          <circle cx="80" cy="60" r="16"/>
          <circle cx="86" cy="56" r="4"/>
        </svg>`,
      map: `
        <svg viewBox="0 0 160 120" aria-hidden="true">
          <path d="M20 28l35-10 50 14 35-10v70l-35 10-50-14-35 10z"/>
          <path d="M55 18v70"/>
          <path d="M105 32v70"/>
          <path d="M30 54c10-8 18-8 28 0s18 8 28 0 18-8 28 0"/>
        </svg>`,
      sound: `
        <svg viewBox="0 0 160 120" aria-hidden="true">
          <path d="M30 70V50"/>
          <path d="M45 78V42"/>
          <path d="M60 86V34"/>
          <path d="M75 78V42"/>
          <path d="M90 70V50"/>
          <path d="M110 52c10 10 10 26 0 36"/>
          <path d="M122 44c16 16 16 42 0 58"/>
        </svg>`,
      footprints: `
        <svg viewBox="0 0 160 120" aria-hidden="true">
          <path d="M55 76c6-10 6-22 0-32-6-10-18-8-22 2-4 10 3 24 22 30z"/>
          <path d="M90 92c6-10 6-22 0-32-6-10-18-8-22 2-4 10 3 24 22 30z"/>
          <circle cx="36" cy="40" r="6"/>
          <circle cx="44" cy="34" r="5"/>
          <circle cx="54" cy="32" r="4"/>
          <circle cx="78" cy="56" r="6"/>
          <circle cx="86" cy="50" r="5"/>
          <circle cx="96" cy="48" r="4"/>
        </svg>`,
      chat: `
        <svg viewBox="0 0 160 120" aria-hidden="true">
          <path d="M24 30h86a20 20 0 0 1 20 20v14a20 20 0 0 1-20 20H64l-24 18v-18H24a20 20 0 0 1-20-20V50a20 20 0 0 1 20-20z"/>
          <path d="M40 56h60"/>
          <path d="M40 70h40"/>
        </svg>`,
      diagram: `
        <svg viewBox="0 0 160 120" aria-hidden="true">
          <rect x="18" y="18" width="46" height="26" rx="6"/>
          <rect x="96" y="18" width="46" height="26" rx="6"/>
          <rect x="18" y="76" width="46" height="26" rx="6"/>
          <rect x="96" y="76" width="46" height="26" rx="6"/>
          <path d="M64 31h32"/>
          <path d="M41 44v32"/>
          <path d="M119 44v32"/>
          <path d="M64 89h32"/>
          <path d="M70 31l-6-6"/>
          <path d="M70 89l-6 6"/>
        </svg>`,
      list: `
        <svg viewBox="0 0 160 120" aria-hidden="true">
          <rect x="28" y="22" width="104" height="76" rx="10"/>
          <path d="M44 42h72"/>
          <path d="M44 58h72"/>
          <path d="M44 74h72"/>
          <path d="M36 42h.01M36 58h.01M36 74h.01"/>
        </svg>`,
      compare: `
        <svg viewBox="0 0 160 120" aria-hidden="true">
          <circle cx="55" cy="52" r="22"/>
          <circle cx="105" cy="68" r="22"/>
          <path d="M40 52h30"/>
          <path d="M90 68h30"/>
          <path d="M68 60l12 6"/>
        </svg>`,
      screen: `
        <svg viewBox="0 0 160 120" aria-hidden="true">
          <rect x="20" y="18" width="120" height="72" rx="10"/>
          <path d="M60 96h40"/>
          <path d="M80 90v6"/>
          <path d="M34 34h50"/>
          <path d="M34 48h70"/>
          <path d="M34 62h60"/>
        </svg>`,
      target: `
        <svg viewBox="0 0 160 120" aria-hidden="true">
          <circle cx="80" cy="60" r="40"/>
          <circle cx="80" cy="60" r="26"/>
          <circle cx="80" cy="60" r="12"/>
          <path d="M80 20v12M80 88v12M40 60h12M108 60h12"/>
        </svg>`,
      hands: `
        <svg viewBox="0 0 160 120" aria-hidden="true">
          <path d="M34 68c8 0 14-6 14-14V42c0-6 8-6 8 0v18"/>
          <path d="M56 60V38c0-6 8-6 8 0v24"/>
          <path d="M72 62V40c0-6 8-6 8 0v26"/>
          <path d="M88 68V46c0-6 8-6 8 0v22"/>
          <path d="M34 68c0 20 12 34 34 34h14c22 0 34-14 34-34"/>
        </svg>`,
      walk: `
        <svg viewBox="0 0 160 120" aria-hidden="true">
          <circle cx="56" cy="30" r="10"/>
          <path d="M56 40l-10 24"/>
          <path d="M56 48l18 10"/>
          <path d="M46 64l-10 26"/>
          <path d="M74 58l10 28"/>
          <path d="M104 30c14 10 20 22 20 36s-8 26-20 36"/>
          <path d="M104 30c-8 6-12 14-12 24s4 18 12 24"/>
        </svg>`,
      warning: `
        <svg viewBox="0 0 160 120" aria-hidden="true">
          <path d="M80 18l62 92H18z"/>
          <path d="M80 50v26"/>
          <path d="M80 88h.01"/>
        </svg>`,
      clock: `
        <svg viewBox="0 0 160 120" aria-hidden="true">
          <circle cx="80" cy="60" r="42"/>
          <path d="M80 60V38"/>
          <path d="M80 60l20 12"/>
          <path d="M52 18l-10 12M108 18l10 12"/>
        </svg>`,
      folder: `
        <svg viewBox="0 0 160 120" aria-hidden="true">
          <path d="M22 40h50l10 10h56v54H22z"/>
          <path d="M22 40v-8c0-6 4-10 10-10h32l10 10h64c6 0 10 4 10 10v8"/>
          <path d="M34 64h92"/>
          <path d="M34 78h72"/>
        </svg>`,
      box: `
        <svg viewBox="0 0 160 120" aria-hidden="true">
          <path d="M30 40l50-20 50 20-50 20z"/>
          <path d="M30 40v50l50 20 50-20V40"/>
          <path d="M80 60v50"/>
        </svg>`,
      abc: `
        <svg viewBox="0 0 160 120" aria-hidden="true">
          <path d="M36 96V26h56l16 16v54z"/>
          <path d="M92 26v16h16"/>
          <path d="M52 62l8-18 8 18"/>
          <path d="M54 58h12"/>
          <path d="M78 62V44h10c6 0 8 3 8 7s-2 7-8 7H78"/>
          <path d="M110 60c-4 3-8 4-12 2-6-3-6-13 0-16 4-2 8-1 12 2"/>
        </svg>`,
      tree: `
        <svg viewBox="0 0 160 120" aria-hidden="true">
          <rect x="70" y="18" width="20" height="16" rx="4"/>
          <path d="M80 34v14"/>
          <rect x="30" y="48" width="26" height="16" rx="4"/>
          <rect x="67" y="48" width="26" height="16" rx="4"/>
          <rect x="104" y="48" width="26" height="16" rx="4"/>
          <path d="M80 48h-37"/>
          <path d="M80 48h0"/>
          <path d="M80 48h37"/>
          <path d="M43 64v14M80 64v14M117 64v14"/>
          <rect x="18" y="78" width="26" height="16" rx="4"/>
          <rect x="48" y="78" width="26" height="16" rx="4"/>
          <rect x="67" y="78" width="26" height="16" rx="4"/>
          <rect x="86" y="78" width="26" height="16" rx="4"/>
          <rect x="116" y="78" width="26" height="16" rx="4"/>
        </svg>`,
      kit: `
        <svg viewBox="0 0 160 120" aria-hidden="true">
          <rect x="28" y="42" width="104" height="54" rx="12"/>
          <path d="M50 42v-10c0-8 6-14 14-14h32c8 0 14 6 14 14v10"/>
          <path d="M28 62h104"/>
          <path d="M60 74h40"/>
          <path d="M80 62v14"/>
          <path d="M72 82h16"/>
        </svg>`
    };
    return s[name] || s.eye;
  }

  /* =========================
     Recherche + surlignage
     ========================= */
  const escapeHTML = (s) => (s ?? "").replace(/[&<>"']/g, m => ({
    "&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"
  }[m]));

  function highlight(text, q){
    const safe = escapeHTML(text);
    if(!q) return safe;
    const re = new RegExp(`(${q.replace(/[.*+?^${}()|[\]\\]/g, '\\$&')})`, "ig");
    return safe.replace(re, "<mark>$1</mark>");
  }

  /* =========================
     UI
     ========================= */
  const grid = document.getElementById("grid");
  const search = document.getElementById("search");
  const clearBtn = document.getElementById("clearBtn");
  const catMenu = document.getElementById("catMenu");
  const nores = document.getElementById("nores");
  const count = document.getElementById("count");

  let activeCat = "all";

  function renderCatMenu(){
    catMenu.innerHTML = "";
    CATEGORIES.forEach(c=>{
      const btn = document.createElement("button");
      btn.className = "catBtn" + (c.id===activeCat ? " active":"");
      const dot = document.createElement("span");
      dot.className = "catDot";
      dot.style.background = (c.id==="all") ? "rgba(255,255,255,.9)" : `var(${c.dotVar})`;
      btn.appendChild(dot);
      btn.appendChild(document.createTextNode(c.label));
      btn.addEventListener("click", ()=>{
        activeCat = c.id;
        renderCatMenu();
        render();
      });
      catMenu.appendChild(btn);
    });
  }

  function matches(ex, q){
    if(!q) return true;
    const hay = [
      ex.title, ex.desc, ex.example, ex.goals, ex.attention,
      ex.variants,
      (ex.tags||[]).join(" "),
      Object.values(ex.proto||{}).join(" ")
    ].join(" ").toLowerCase();
    return hay.includes(q.toLowerCase());
  }

  function render(){
    const q = (search.value || "").trim();
    const filtered = EX.filter(ex=>{
      const catOk = (activeCat==="all" ? true : ex.cat===activeCat);
      const qOk = matches(ex, q);
      return catOk && qOk;
    });

    grid.innerHTML = "";
    filtered.forEach(ex => grid.appendChild(card(ex, q)));

    nores.style.display = filtered.length ? "none" : "block";
    count.style.display = "block";
    count.textContent = `${filtered.length} exercice(s) — Catégorie : ${CATEGORIES.find(c=>c.id===activeCat)?.label || "—"}`;
  }

  function card(ex, q){
    const c = document.createElement("article");
    c.className = "card";

    const badge = catBadge(ex.cat);

    c.innerHTML = `
      <div class="cardHeader">
        <div>
          <div class="exNo">EXERCICE #${ex.id}</div>
          <div class="exTitle">${highlight(ex.title, q)}</div>
        </div>
        <div class="badge" style="background:${badge.bg}">${badge.label}</div>
      </div>

      <div class="iconWrap">${iconSVG(ex.icon)}</div>

      <div class="cardBody">
        <p class="miniDesc">${highlight(ex.desc, q)}</p>
        <div class="actions">
          <button class="btn btnPrimary" data-open="${ex.id}">Ouvrir</button>
          <button class="btn" data-copy="${ex.id}">Copier protocole</button>
        </div>
      </div>
    `;

    c.querySelector("[data-open]")?.addEventListener("click", ()=> openModal(ex.id, q));
    c.querySelector("[data-copy]")?.addEventListener("click", ()=> copyProto(ex.id));

    return c;
  }

  /* =========================
     Modal
     ========================= */
  const overlay = document.getElementById("overlay");
  const closeBtn = document.getElementById("closeBtn");

  const mTitle = document.getElementById("mTitle");
  const mMeta  = document.getElementById("mMeta");
  const mDesc  = document.getElementById("mDesc");
  const mExample = document.getElementById("mExample");
  const mGoals = document.getElementById("mGoals");
  const mWarn = document.getElementById("mWarn");
  const mProto = document.getElementById("mProto");
  const mVar = document.getElementById("mVar");
  const mTags = document.getElementById("mTags");

  function openModal(id, q){
    const ex = EX.find(x=>x.id===id);
    if(!ex) return;

    const badge = catBadge(ex.cat);

    mTitle.innerHTML = `EXERCICE #${ex.id} — ${highlight(ex.title, q)}`;
    mMeta.innerHTML = `Catégorie : <span class="badge" style="background:${badge.bg}; margin-left:.35rem;">${badge.label}</span>`;

    mDesc.innerHTML = highlight(ex.desc, q);
    mExample.innerHTML = highlight(ex.example, q);
    mGoals.innerHTML = highlight(ex.goals, q);

    mWarn.innerHTML = `${warnIcon()}<div><b>Attention :</b> ${highlight(ex.attention, q)}</div>`;

    const order = ["Qui","Quoi","Comment","Combien","Quand","Où","Pourquoi","Pour quoi"];
    mProto.innerHTML = "";
    order.forEach(k=>{
      const v = ex.proto?.[k] ?? "—";
      const kDiv = document.createElement("div");
      kDiv.className = "k";
      kDiv.textContent = k;
      const vDiv = document.createElement("div");
      vDiv.className = "v";
      vDiv.innerHTML = highlight(String(v), q);
      mProto.appendChild(kDiv);
      mProto.appendChild(vDiv);
    });

    mVar.innerHTML = highlight(ex.variants || "—", q);
    mTags.innerHTML = (ex.tags || []).map(t => `
      <span style="display:inline-block; margin:.2rem .25rem .2rem 0; padding:.25rem .55rem; border:1px solid var(--line); border-radius:999px; background:white; font-weight:900; font-size:.82rem;">
        ${highlight(t, q)}
      </span>`).join("");

    overlay.style.display = "flex";
    document.body.style.overflow = "hidden";
  }

  function closeModal(){
    overlay.style.display = "none";
    document.body.style.overflow = "";
  }

  overlay.addEventListener("click", (e)=>{
    if(e.target === overlay) closeModal();
  });
  closeBtn.addEventListener("click", closeModal);
  document.addEventListener("keydown", (e)=>{
    if(e.key==="Escape") closeModal();
  });

  /* =========================
     Copier protocole
     ========================= */
  async function copyProto(id){
    const ex = EX.find(x=>x.id===id);
    if(!ex) return;

    const order = ["Qui","Quoi","Comment","Combien","Quand","Où","Pourquoi","Pour quoi"];
    let txt = `EXERCICE #${ex.id} — ${ex.title}\nCatégorie : ${catBadge(ex.cat).label}\n\n`;
    txt += `Précisions : ${ex.desc}\n\n`;
    txt += `Objectifs (pour quoi) : ${ex.goals}\n\n`;
    txt += `Exemple : ${ex.example}\n\n`;
    txt += `Points d’attention : ${ex.attention}\n\n`;
    order.forEach(k=>{
      txt += `${k} : ${ex.proto?.[k] ?? "—"}\n`;
    });
    txt += `\nVariantes : ${ex.variants || "—"}\n`;
    txt += `Mots-clés : ${(ex.tags||[]).join(", ")}\n`;

    try{
      await navigator.clipboard.writeText(txt);
      toast("Contenu copié ✅");
    }catch{
      toast("Copie impossible (navigateur).");
    }
  }

  /* =========================
     Toast
     ========================= */
  function toast(msg){
    const el = document.createElement("div");
    el.textContent = msg;
    el.style.position = "fixed";
    el.style.left = "50%";
    el.style.bottom = "18px";
    el.style.transform = "translateX(-50%)";
    el.style.background = "#111827";
    el.style.color = "white";
    el.style.padding = ".6rem .85rem";
    el.style.borderRadius = "999px";
    el.style.fontWeight = "950";
    el.style.boxShadow = "0 10px 28px rgba(0,0,0,.25)";
    el.style.zIndex = "200";
    document.body.appendChild(el);
    setTimeout(()=>{ el.style.opacity="0"; el.style.transition="opacity .2s ease"; }, 1200);
    setTimeout(()=>{ el.remove(); }, 1500);
  }

  /* =========================
     Listeners
     ========================= */
  let t = null;
  search.addEventListener("input", ()=>{
    clearTimeout(t);
    t = setTimeout(render, 90);
  });

  clearBtn.addEventListener("click", ()=>{
    search.value = "";
    activeCat = "all";
    renderCatMenu();
    render();
    search.focus();
  });

  /* Init */
  renderCatMenu();
  render();
</script>

<!--
  ✅ GitHub Pages
  1) Dépôt GitHub → fichier index.html (copier-coller ce code)
  2) Settings → Pages → Deploy from branch → main / root
-->
</body>
</html>
